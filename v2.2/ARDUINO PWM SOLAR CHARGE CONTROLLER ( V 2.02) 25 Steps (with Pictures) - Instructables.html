<!DOCTYPE html><html lang="en" class="no-js is-desktop "><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# ibles-production: http://ogp.me/ns/fb/ibles-production#"><meta charset="utf-8"><script type="text/javascript">(window.NREUM||(NREUM={})).init={privacy:{cookies_enabled:false}};(window.NREUM||(NREUM={})).loader_config={xpid:"VgYDU1VQChAJUlhSBAMOVFw=",licenseKey:"3a6f258991",applicationID:"969032928"};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var i=e[n]={exports:{}};t[n][0].call(i.exports,function(e){var i=t[n][1][e];return r(i||e)},i,i.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,n){function r(t){try{s.console&&console.log(t)}catch(e){}}var i,o=t("ee"),a=t(25),s={};try{i=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,i.indexOf("dev")!==-1&&(s.dev=!0),i.indexOf("nr_dev")!==-1&&(s.nrDev=!0))}catch(c){}s.nrDev&&o.on("internal-error",function(t){r(t.stack)}),s.dev&&o.on("fn-err",function(t,e,n){r(n.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(s,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,s){try{p?p-=1:i(s||new UncaughtException(t,e,n),!0)}catch(f){try{o("ierr",[f,c.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function i(t,e){var n=e?null:c.now();o("err",[t,n])}var o=t("handle"),a=t(26),s=t("ee"),c=t("loader"),f=t("gos"),u=window.onerror,d=!1,l="nr@seenError";if(!c.disabled){var p=0;c.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(h){"stack"in h&&(t(9),t(8),"addEventListener"in window&&t(5),c.xhrWrappable&&t(10),d=!0)}s.on("fn-start",function(t,e,n){d&&(p+=1)}),s.on("fn-err",function(t,e,n){d&&!n[l]&&(f(n,l,function(){return!0}),this.thrown=!0,i(n))}),s.on("fn-end",function(){d&&!this.thrown&&p>0&&(p-=1)}),s.on("internal-error",function(t){o("ierr",[t,c.now(),!0])})}},{}],3:[function(t,e,n){var r=t("loader");r.disabled||(r.features.ins=!0)},{}],4:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var i=t("ee"),o=t("handle"),a=t(9),s=t(8),c="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",g="pushState",y=t("loader");if(!y.disabled){y.features.stn=!0,t(7),"addEventListener"in window&&t(5);var x=NREUM.o.EV;i.on(m,function(t,e){var n=t[0];n instanceof x&&(this.bstStart=y.now())}),i.on(w,function(t,e){var n=t[0];n instanceof x&&o("bst",[n,e,this.bstStart,y.now()])}),a.on(m,function(t,e,n){this.bstStart=y.now(),this.bstType=n}),a.on(w,function(t,e){o(v,[e,this.bstStart,y.now(),this.bstType])}),s.on(m,function(){this.bstStart=y.now()}),s.on(w,function(t,e){o(v,[e,this.bstStart,y.now(),"requestAnimationFrame"])}),i.on(g+p,function(t){this.time=y.now(),this.startPath=location.pathname+location.hash}),i.on(g+h,function(t){o("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+c]?window.performance[f](u,function(t){o(d,[window.performance.getEntriesByType(l)]),window.performance["c"+c]()},!1):window.performance[f]("webkit"+u,function(t){o(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+c]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}}},{}],5:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&i(e)}function i(t){s.inPlace(t,[u,d],"-",o)}function o(t,e){return t[1]}var a=t("ee").get("events"),s=t("wrap-function")(a,!0),c=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(i(window),i(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=c(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?s(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=o(arguments),e={};i.emit(n+"before-start",[t],e);var a;e[m]&&e[m].dt&&(a=e[m].dt);var s=r.apply(this,t);return i.emit(n+"start",[t,a],s),s.then(function(t){return i.emit(n+"end",[null,t],s),t},function(t){throw i.emit(n+"end",[t],s),t})})}var i=t("ee").get("fetch"),o=t(26),a=t(25);e.exports=i;var s=window,c="fetch-",f=c+"body-",u=["arrayBuffer","blob","json","text","formData"],d=s.Request,l=s.Response,p=s.fetch,h="prototype",m="nr@context";d&&l&&p&&(a(u,function(t,e){r(d[h],e,f),r(l[h],e,f)}),r(s,"fetch",c),i.on(c+"end",function(t,e){var n=this;if(e){var r=e.headers.get("content-length");null!==r&&(n.rxSize=r),i.emit(c+"done",[null,e],n)}else i.emit(c+"done",[t],n)}))},{}],7:[function(t,e,n){var r=t("ee").get("history"),i=t("wrap-function")(r);e.exports=r;var o=window.history&&window.history.constructor&&window.history.constructor.prototype,a=window.history;o&&o.pushState&&o.replaceState&&(a=o),i.inPlace(a,["pushState","replaceState"],"-")},{}],8:[function(t,e,n){var r=t("ee").get("raf"),i=t("wrap-function")(r),o="equestAnimationFrame";e.exports=r,i.inPlace(window,["r"+o,"mozR"+o,"webkitR"+o,"msR"+o],"raf-"),r.on("raf-start",function(t){t[0]=i(t[0],"fn-")})},{}],9:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function i(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var o=t("ee").get("timer"),a=t("wrap-function")(o),s="setTimeout",c="setInterval",f="clearTimeout",u="-start",d="-";e.exports=o,a.inPlace(window,[s,"setImmediate"],s+d),a.inPlace(window,[c],c+d),a.inPlace(window,[f,"clearImmediate"],f+d),o.on(c+u,r),o.on(s+u,i)},{}],10:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",s)}function i(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,g,"fn-",s)}function o(t){y.push(t),h&&(b?b.then(a):w?w(a):(E=-E,R.data=E))}function a(){for(var t=0;t<y.length;t++)r([],y[t]);y.length&&(y=[])}function s(t,e){return e}function c(t,e){for(var n in t)e[n]=t[n];return e}t(5);var f=t("ee"),u=f.get("xhr"),d=t("wrap-function")(u),l=NREUM.o,p=l.XHR,h=l.MO,m=l.PR,w=l.SI,v="readystatechange",g=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],y=[];e.exports=u;var x=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(v,i,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(c(p,x),x.prototype=p.prototype,d.inPlace(x.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(t,e){r(t,e),o(e)}),u.on("open-xhr-start",r),h){var b=m&&m.resolve();if(!w&&!m){var E=1,R=document.createTextNode(E);new h(a).observe(R,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===v||a()})},{}],11:[function(t,e,n){function r(t){if(!s(t))return null;var e=window.NREUM;if(!e.loader_config)return null;var n=(e.loader_config.accountID||"").toString()||null,r=(e.loader_config.agentID||"").toString()||null,f=(e.loader_config.trustKey||"").toString()||null;if(!n||!r)return null;var h=p.generateSpanId(),m=p.generateTraceId(),w=Date.now(),v={spanId:h,traceId:m,timestamp:w};return(t.sameOrigin||c(t)&&l())&&(v.traceContextParentHeader=i(h,m),v.traceContextStateHeader=o(h,w,n,r,f)),(t.sameOrigin&&!u()||!t.sameOrigin&&c(t)&&d())&&(v.newrelicHeader=a(h,m,w,n,r,f)),v}function i(t,e){return"00-"+e+"-"+t+"-01"}function o(t,e,n,r,i){var o=0,a="",s=1,c="",f="";return i+"@nr="+o+"-"+s+"-"+n+"-"+r+"-"+t+"-"+a+"-"+c+"-"+f+"-"+e}function a(t,e,n,r,i,o){var a="btoa"in window&&"function"==typeof window.btoa;if(!a)return null;var s={v:[0,1],d:{ty:"Browser",ac:r,ap:i,id:t,tr:e,ti:n}};return o&&r!==o&&(s.d.tk=o),btoa(JSON.stringify(s))}function s(t){return f()&&c(t)}function c(t){var e=!1,n={};if("init"in NREUM&&"distributed_tracing"in NREUM.init&&(n=NREUM.init.distributed_tracing),t.sameOrigin)e=!0;else if(n.allowed_origins instanceof Array)for(var r=0;r<n.allowed_origins.length;r++){var i=h(n.allowed_origins[r]);if(t.hostname===i.hostname&&t.protocol===i.protocol&&t.port===i.port){e=!0;break}}return e}function f(){return"init"in NREUM&&"distributed_tracing"in NREUM.init&&!!NREUM.init.distributed_tracing.enabled}function u(){return"init"in NREUM&&"distributed_tracing"in NREUM.init&&!!NREUM.init.distributed_tracing.exclude_newrelic_header}function d(){return"init"in NREUM&&"distributed_tracing"in NREUM.init&&NREUM.init.distributed_tracing.cors_use_newrelic_header!==!1}function l(){return"init"in NREUM&&"distributed_tracing"in NREUM.init&&!!NREUM.init.distributed_tracing.cors_use_tracecontext_headers}var p=t(22),h=t(13);e.exports={generateTracePayload:r,shouldGenerateTrace:s}},{}],12:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<l;r++)t.removeEventListener(d[r],this.listener,!1);e.aborted||(n.duration=a.now()-this.startTime,this.loadCaptureCalled||4!==t.readyState?null==e.status&&(e.status=0):o(this,t),n.cbTime=this.cbTime,u.emit("xhr-done",[t],t),s("xhr",[e,n,this.startTime]))}}function i(t,e){var n=c(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.parsedOrigin=n,t.sameOrigin=n.sameOrigin}function o(t,e){t.params.status=e.status;var n=w(e,t.lastSize);if(n&&(t.metrics.rxSize=n),t.sameOrigin){var r=e.getResponseHeader("X-NewRelic-App-Data");r&&(t.params.cat=r.split(", ").pop())}t.loadCaptureCalled=!0}var a=t("loader");if(a.xhrWrappable&&!a.disabled){var s=t("handle"),c=t(13),f=t(11).generateTracePayload,u=t("ee"),d=["load","error","abort","timeout"],l=d.length,p=t("id"),h=t(18),m=t(17),w=t(14),v=NREUM.o.REQ,g=window.XMLHttpRequest;a.features.xhr=!0,t(10),t(6),u.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,e.loadCaptureCalled=!1,e.params=this.params||{},e.metrics=this.metrics||{},t.addEventListener("load",function(n){o(e,t)},!1),h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),u.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),u.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid);var n=f(this.parsedOrigin);if(n){var r=!1;n.newrelicHeader&&(e.setRequestHeader("newrelic",n.newrelicHeader),r=!0),n.traceContextParentHeader&&(e.setRequestHeader("traceparent",n.traceContextParentHeader),n.traceContextStateHeader&&e.setRequestHeader("tracestate",n.traceContextStateHeader),r=!0),r&&(this.dt=n)}}),u.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],i=this;if(n&&r){var o=m(r);o&&(n.txSize=o)}this.startTime=a.now(),this.listener=function(t){try{"abort"!==t.type||i.loadCaptureCalled||(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof e.onload))&&i.end(e)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}};for(var s=0;s<l;s++)e.addEventListener(d[s],this.listener,!1)}),u.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),u.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),u.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),u.on("addEventListener-end",function(t,e){e instanceof g&&"load"===t[0]&&u.emit("xhr-load-added",[t[1],t[2]],e)}),u.on("removeEventListener-end",function(t,e){e instanceof g&&"load"===t[0]&&u.emit("xhr-load-removed",[t[1],t[2]],e)}),u.on("fn-start",function(t,e,n){e instanceof g&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),u.on("fn-end",function(t,e){this.xhrCbStart&&u.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)}),u.on("fetch-before-start",function(t){function e(t,e){var n=!1;return e.newrelicHeader&&(t.set("newrelic",e.newrelicHeader),n=!0),e.traceContextParentHeader&&(t.set("traceparent",e.traceContextParentHeader),e.traceContextStateHeader&&t.set("tracestate",e.traceContextStateHeader),n=!0),n}var n,r=t[1]||{};"string"==typeof t[0]?n=t[0]:t[0]&&t[0].url?n=t[0].url:window.URL&&t[0]&&t[0]instanceof URL&&(n=t[0].href),n&&(this.parsedOrigin=c(n),this.sameOrigin=this.parsedOrigin.sameOrigin);var i=f(this.parsedOrigin);if(i&&(i.newrelicHeader||i.traceContextParentHeader))if("string"==typeof t[0]||window.URL&&t[0]&&t[0]instanceof URL){var o={};for(var a in r)o[a]=r[a];o.headers=new Headers(r.headers||{}),e(o.headers,i)&&(this.dt=i),t.length>1?t[1]=o:t.push(o)}else t[0]&&t[0].headers&&e(t[0].headers,i)&&(this.dt=i)}),u.on("fetch-start",function(t,e){this.params={},this.metrics={},this.startTime=a.now(),t.length>=1&&(this.target=t[0]),t.length>=2&&(this.opts=t[1]);var n,r=this.opts||{},o=this.target;"string"==typeof o?n=o:"object"==typeof o&&o instanceof v?n=o.url:window.URL&&"object"==typeof o&&o instanceof URL&&(n=o.href),i(this,n);var s=(""+(o&&o instanceof v&&o.method||r.method||"GET")).toUpperCase();this.params.method=s,this.txSize=m(r.body)||0}),u.on("fetch-done",function(t,e){this.params||(this.params={}),this.params.status=e?e.status:0;var n;"string"==typeof this.rxSize&&this.rxSize.length>0&&(n=+this.rxSize);var r={txSize:this.txSize,rxSize:n,duration:a.now()-this.startTime};s("xhr",[this.params,r,this.startTime])})}},{}],13:[function(t,e,n){var r={};e.exports=function(t){if(t in r)return r[t];var e=document.createElement("a"),n=window.location,i={};e.href=t,i.port=e.port;var o=e.href.split("://");!i.port&&o[1]&&(i.port=o[1].split("/")[0].split("@").pop().split(":")[1]),i.port&&"0"!==i.port||(i.port="https"===o[0]?"443":"80"),i.hostname=e.hostname||n.hostname,i.pathname=e.pathname,i.protocol=o[0],"/"!==i.pathname.charAt(0)&&(i.pathname="/"+i.pathname);var a=!e.protocol||":"===e.protocol||e.protocol===n.protocol,s=e.hostname===document.domain&&e.port===n.port;return i.sameOrigin=a&&(!e.hostname||s),"/"===i.pathname&&(r[t]=i),i}},{}],14:[function(t,e,n){function r(t,e){var n=t.responseType;return"json"===n&&null!==e?e:"arraybuffer"===n||"blob"===n||"json"===n?i(t.response):"text"===n||""===n||void 0===n?i(t.responseText):void 0}var i=t(17);e.exports=r},{}],15:[function(t,e,n){function r(){}function i(t,e,n){return function(){return o(t,[f.now()].concat(s(arguments)),e?null:this,n),e?void 0:this}}var o=t("handle"),a=t(25),s=t(26),c=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",p=l+"ixn-";a(d,function(t,e){u[e]=i(l+e,!0,"api")}),u.addPageAction=i(l+"addPageAction",!0),u.setCurrentRouteName=i(l+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,e){var n={},r=this,i="function"==typeof e;return o(p+"tracer",[f.now(),t,n],r),function(){if(c.emit((i?"":"no-")+"fn-start",[f.now(),r,i],n),i)try{return e.apply(this,arguments)}catch(t){throw c.emit("fn-err",[arguments,this,t],n),t}finally{c.emit("fn-end",[f.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){h[e]=i(p+e)}),newrelic.noticeError=function(t,e){"string"==typeof t&&(t=new Error(t)),o("err",[t,f.now(),!1,e])}},{}],16:[function(t,e,n){function r(t){if(NREUM.init){for(var e=NREUM.init,n=t.split("."),r=0;r<n.length-1;r++)if(e=e[n[r]],"object"!=typeof e)return;return e=e[n[n.length-1]]}}e.exports={getConfiguration:r}},{}],17:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],18:[function(t,e,n){var r=0,i=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);i&&(r=+i[1]),e.exports=r},{}],19:[function(t,e,n){function r(){return s.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,s=t(27);e.exports=r,e.exports.offset=a,e.exports.getLastTimestamp=i},{}],20:[function(t,e,n){function r(t){return!(!t||!t.protocol||"file:"===t.protocol)}e.exports=r},{}],21:[function(t,e,n){function r(t,e){var n=t.getEntries();n.forEach(function(t){"first-paint"===t.name?d("timing",["fp",Math.floor(t.startTime)]):"first-contentful-paint"===t.name&&d("timing",["fcp",Math.floor(t.startTime)])})}function i(t,e){var n=t.getEntries();n.length>0&&d("lcp",[n[n.length-1]])}function o(t){t.getEntries().forEach(function(t){t.hadRecentInput||d("cls",[t])})}function a(t){if(t instanceof h&&!w){var e=Math.round(t.timeStamp),n={type:t.type};e<=l.now()?n.fid=l.now()-e:e>l.offset&&e<=Date.now()?(e-=l.offset,n.fid=l.now()-e):e=l.now(),w=!0,d("timing",["fi",e,n])}}function s(t){"hidden"===t&&d("pageHide",[l.now()])}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var c,f,u,d=t("handle"),l=t("loader"),p=t(24),h=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){c=new PerformanceObserver(r);try{c.observe({entryTypes:["paint"]})}catch(m){}f=new PerformanceObserver(i);try{f.observe({entryTypes:["largest-contentful-paint"]})}catch(m){}u=new PerformanceObserver(o);try{u.observe({type:"layout-shift",buffered:!0})}catch(m){}}if("addEventListener"in document){var w=!1,v=["click","keydown","mousedown","pointerdown","touchstart"];v.forEach(function(t){document.addEventListener(t,a,!1)})}p(s)}},{}],22:[function(t,e,n){function r(){function t(){return e?15&e[n++]:16*Math.random()|0}var e=null,n=0,r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(e=r.getRandomValues(new Uint8Array(31)));for(var i,o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",a="",s=0;s<o.length;s++)i=o[s],"x"===i?a+=t().toString(16):"y"===i?(i=3&t()|8,a+=i.toString(16)):a+=i;return a}function i(){return a(16)}function o(){return a(32)}function a(t){function e(){return n?15&n[r++]:16*Math.random()|0}var n=null,r=0,i=window.crypto||window.msCrypto;i&&i.getRandomValues&&Uint8Array&&(n=i.getRandomValues(new Uint8Array(31)));for(var o=[],a=0;a<t;a++)o.push(e().toString(16));return o.join("")}e.exports={generateUuid:r,generateSpanId:i,generateTraceId:o}},{}],23:[function(t,e,n){function r(t,e){if(!i)return!1;if(t!==i)return!1;if(!e)return!0;if(!o)return!1;for(var n=o.split("."),r=e.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var s=navigator.userAgent,c=s.match(a);c&&s.indexOf("Chrome")===-1&&s.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}e.exports={agent:i,version:o,match:r}},{}],24:[function(t,e,n){function r(t){function e(){t(a&&document[a]?document[a]:document[i]?"hidden":"visible")}"addEventListener"in document&&o&&document.addEventListener(o,e,!1)}e.exports=r;var i,o,a;"undefined"!=typeof document.hidden?(i="hidden",o="visibilitychange",a="visibilityState"):"undefined"!=typeof document.msHidden?(i="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",o="webkitvisibilitychange",a="webkitVisibilityState")},{}],25:[function(t,e,n){function r(t,e){var n=[],r="",o=0;for(r in t)i.call(t,r)&&(n[o]=e(r,t[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],26:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}e.exports=r},{}],27:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(t,e,n){function r(){}function i(t){function e(t){return t&&t instanceof r?t:t?f(t,c,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!p.aborted||o){t&&a&&t(n,r,i);for(var s=e(i),c=m(n),f=c.length,u=0;u<f;u++)c[u].apply(s,r);var l=d[y[n]];return l&&l.push([x,n,r,s]),s}}function o(t,e){g[t]=m(t).concat(e)}function h(t,e){var n=g[t];if(n)for(var r=0;r<n.length;r++)n[r]===e&&n.splice(r,1)}function m(t){return g[t]||[]}function w(t){return l[t]=l[t]||i(n)}function v(t,e){p.aborted||u(t,function(t,n){e=e||"feature",y[n]=e,e in d||(d[e]=[])})}var g={},y={},x={on:o,addEventListener:o,removeEventListener:h,emit:n,get:w,listeners:m,context:e,buffer:v,abort:s,aborted:!1};return x}function o(t){return f(t,c,a)}function a(){return new r}function s(){(d.api||d.feature)&&(p.aborted=!0,d=p.backlog={})}var c="nr@context",f=t("gos"),u=t(25),d={},l={},p=e.exports=i();e.exports.getOrSetContext=o,p.backlog=d},{}],gos:[function(t,e,n){function r(t,e,n){if(i.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return t[e]=r,r}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){i.buffer([t],r),i.emit(t,e,n)}var i=t("ee").get("handle");e.exports=r,r.ee=i},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,o,function(){return i++})}var i=1,o="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!O++){var t=S.info=NREUM.info,e=m.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();c(E,function(e,n){t[e]||(t[e]=n)});var n=a();s("mark",["onload",n+S.offset],null,"api"),s("timing",["load",n]);var r=m.createElement("script");0===t.agent.indexOf("http://")||0===t.agent.indexOf("https://")?r.src=t.agent:r.src=p+"://"+t.agent,e.parentNode.insertBefore(r,e)}}function i(){"complete"===m.readyState&&o()}function o(){s("mark",["domContent",a()+S.offset],null,"api")}var a=t(19),s=t("handle"),c=t(25),f=t("ee"),u=t(23),d=t(20),l=t(16),p=l.getConfiguration("ssl")===!1?"http":"https",h=window,m=h.document,w="addEventListener",v="attachEvent",g=h.XMLHttpRequest,y=g&&g.prototype,x=!d(h.location);NREUM.o={ST:setTimeout,SI:h.setImmediate,CT:clearTimeout,XHR:g,REQ:h.Request,EV:h.Event,PR:h.Promise,MO:h.MutationObserver};var b=""+location,E={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1210.min.js"},R=g&&y&&y[w]&&!/CriOS/.test(navigator.userAgent),S=e.exports={offset:a.getLastTimestamp(),now:a,origin:b,features:{},xhrWrappable:R,userAgent:u,disabled:x};if(!x){t(15),t(21),m[w]?(m[w]("DOMContentLoaded",o,!1),h[w]("load",r,!1)):(m[v]("onreadystatechange",i),h[v]("onload",r)),s("mark",["firstbyte",a.getLastTimestamp()],null,"api");var O=0}},{}],"wrap-function":[function(t,e,n){function r(t,e){function n(e,n,r,c,f){function nrWrapper(){var o,a,u,l;try{a=this,o=d(arguments),u="function"==typeof r?r(o,a):r||{}}catch(p){i([p,"",[o,a,c],u],t)}s(n+"start",[o,a,c],u,f);try{return l=e.apply(a,o)}catch(h){throw s(n+"err",[o,a,h],u,f),h}finally{s(n+"end",[o,a,l],u,f)}}return a(e)?e:(n||(n=""),nrWrapper[l]=e,o(e,nrWrapper,t),nrWrapper)}function r(t,e,r,i,o){r||(r="");var s,c,f,u="-"===r.charAt(0);for(f=0;f<e.length;f++)c=e[f],s=t[c],a(s)||(t[c]=n(s,u?c+r:r,i,c,o))}function s(n,r,o,a){if(!h||e){var s=h;h=!0;try{t.emit(n,r,o,e,a)}catch(c){i([c,n,r,o],t)}h=s}}return t||(t=u),n.inPlace=r,n.flag=l,n}function i(t,e){e||(e=u);try{e.emit("internal-error",t)}catch(n){}}function o(t,e,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(t);return r.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(o){i([o],n)}for(var a in t)p.call(t,a)&&(e[a]=t[a]);return e}function a(t){return!(t&&t instanceof Function&&t.apply&&!t[l])}function s(t,e){var n=e(t);return n[l]=t,o(t,n,u),n}function c(t,e,n){var r=t[e];t[e]=s(r,n)}function f(){for(var t=arguments.length,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n];return e}var u=t("ee"),d=t(26),l="nr@original",p=Object.prototype.hasOwnProperty,h=!1;e.exports=r,e.exports.wrapFunction=s,e.exports.wrapInPlace=c,e.exports.argsToArray=f},{}]},{},["loader",2,12,4,3]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam-cell.nr-data.net","errorBeacon":"bam-cell.nr-data.net","licenseKey":"3a6f258991","applicationID":"969032928","transactionName":"ZARRbBcCC0tSV0QIC11OdU0LABFRXFofAgtBBB1bBBcGUGxVXA1eUABHWw08BFRf","queueTime":0,"applicationTime":955,"agent":""}</script><title>ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02) : 25 Steps (with Pictures) - Instructables</title><meta property="fb:app_id" content="140028286058792"/><meta property="og:site_name" content="Instructables"/><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02): If you are planning to install an off-grid solar system with a battery bank, you’ll need a Solar Charge Controller.  It is a device that is placed between the Solar Panel and the Battery Bank to control the amount of electric energy produced by Sola…"/><meta property="og:type" content="article"/><meta property="og:url" content="https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/"/><meta property="og:image" content="https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp&amp;frame=1"/><meta property="og:image:width" content="1920"/><meta property="og:image:height" content="1599"/><meta property="og:title" content="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)"/><meta property="og:description" content="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02): If you are planning to install an off-grid solar system with a battery bank, you’ll need a Solar Charge Controller.  It is a device that is placed between the Solar Panel and the Battery Bank to control the amount of electric energy produced by Sola…"/><meta property="category" content="circuits"/><meta property="channel" content="arduino"/><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@instructables"><meta name="twitter:title" content="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)"/><meta name="twitter:image" content="https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620"/><meta name="thumbnail" content="https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp&amp;frame=1"/><link rel='dns-prefetch' href='//www.google-analytics.com/' /><link rel='dns-prefetch' href='//cdn.instructables.com'/><link rel='dns-prefetch' href='//content.instructables.com'/><link rel="canonical" href="https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/"/><link rel="amphtml" href="https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/?amp_page=true" /><link rel="shortcut icon" type="image/x-icon" href="/assets/img/siteassets/favicon.ico"/><link rel="apple-touch-icon" href="/assets/img/siteassets/apple-touch-icon.png"/><link rel="apple-touch-icon" sizes="192x192" href="/assets/img/siteassets/apple-touch-icon-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/assets/img/siteassets/apple-touch-icon-512x512.png"/><script>
(function(Ibles){
    Ibles.JST = Ibles.JST || {};
    Ibles.pageContext = {};
    Ibles.isStaging = false;
    Ibles.isLoggedIn = false;
    Ibles.accessCookie = "ibleAccess";
    Ibles.loggedInCookie = "loggedIn";
    Ibles.userStorageKey = "ibleuser";
    Ibles.analyticsClientId = "UA-306473-1";
})(window.Ibles = window.Ibles || {});
</script><script>function Deferred(){var e=[],t={resolve:function(n){t.then=function(e){e(n)},t.resolve=function(){throw new Error("Deferred already resolved")};var o,a=0;for(;o=e[a++];)o(n);e=null},then:function(t){e.push(t)}};return t}Ibles.readCookie=function(e,t){return(t=RegExp("(^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(t[2]):null},function(e,t){var n=t.readCookie,o=n(t.loggedInCookie),a=n(t.accessCookie);t.isLoggedIn=!!o||!!a;try{var r=localStorage.getItem(t.userStorageKey);t.user=o&&r&&JSON.parse(r)}catch(e){}}(window,Ibles),function(e,t){var n=t.className;n=n.replace(/(^|\s)no-js(\s|$)/,"$1$2");var o=Ibles.user;if(Ibles.isLoggedIn&&o){n+=" is-loggedin",o.role&&o.role.indexOf("ADMIN")>=0&&(n+=" is-admin");for(var a=o.occupations,r=0;r<a.length;r++)if(a[r].name.toLowerCase().indexOf("teacher")>=0){n+=" is-teacher";break}}t.className=n}(Ibles,document.documentElement),function(e,t){var n=[],o=[],a=[],r=/p/.test(t.readyState),s="onpageshow"in e?"pageshow":"load";function i(e){e.constructor==Array&&e.length&&a.push.apply(a,e)}function l(e){return"function"==typeof e}function c(){var e=arguments,t=e[0],o=e[e.length-1];"object"==typeof t&&t.constructor===Object&&(o=t.callback,t=t.test?t.success:t.failure),l(o)&&(i(t),n.push([o]))}function d(e,n,o){var a=t.createElement("script");for(var r in a.src=e,a.async=!0,n)a.setAttribute(r,n[r]);l(o)&&(a.onload=o);var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(a,s)}function u(e,t){r?setTimeout(e,t||32):o.push(e,t)}e.addEventListener(s,(function(){for(r=!0;o[0];)u(o.shift(),o.shift())})),e.sessionReady=c,e.loadJS=c,e.loadJsQueue=n,e.sessionReady=c,e.deferJS=function(e,t,n){l(e)?u(e):u((function(){d(e,{},t)}),n)},e.loadScript=d,e.pageScripts=a}(window,document),function(e,t,n){var o,a,r,s,i,l;a=t,r="script",s="ga",(o=e).GoogleAnalyticsObject=s,o.ga=o.ga||function(){(o.ga.q=o.ga.q||[]).push(arguments)},o.ga.l=1*new Date,i=a.createElement(r),l=a.getElementsByTagName(r)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",l.parentNode.insertBefore(i,l),n.user?ga("create","UA-306473-1","auto",{userId:n.user.id}):ga("create","UA-306473-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")}(window,document,Ibles),
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
function(e){"use strict";e.loadCSS||(e.loadCSS=function(){});var t=loadCSS.relpreload={};if(t.support=function(){var t;try{t=e.document.createElement("link").relList.supports("preload")}catch(e){t=!1}return function(){return t}}(),t.bindMediaToggle=function(e){var t=e.media||"all";function n(){e.addEventListener?e.removeEventListener("load",n):e.attachEvent&&e.detachEvent("onload",n),e.setAttribute("onload",null),e.media=t}e.addEventListener?e.addEventListener("load",n):e.attachEvent&&e.attachEvent("onload",n),setTimeout((function(){e.rel="stylesheet",e.media="only x"})),setTimeout(n,3e3)},t.poly=function(){if(!t.support())for(var n=e.document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o];"preload"!==a.rel||"style"!==a.getAttribute("as")||a.getAttribute("data-loadcss")||(a.setAttribute("data-loadcss",!0),t.bindMediaToggle(a))}},!t.support()){t.poly();var n=e.setInterval(t.poly,500);e.addEventListener?e.addEventListener("load",(function(){t.poly(),e.clearInterval(n)})):e.attachEvent&&e.attachEvent("onload",(function(){t.poly(),e.clearInterval(n)}))}"undefined"!=typeof exports?exports.loadCSS=loadCSS:e.loadCSS=loadCSS}("undefined"!=typeof global?global:this);</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)","name":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)","description":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02): If you are planning to install an off-grid solar system with a battery bank, you\u2019ll need a Solar Charge Controller.  It is a device that is placed between the Solar Panel and the Battery Bank to control the amount of electric energy produced by Sola\u2026","datePublished":"2020-03-24","dateModified":"2020-07-21","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/"},"image":{"@type":"ImageObject","url":"https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp","width":1024,"height":853},"author":{"@type":"Organization","name":"Instructables","url":"https://www.instructables.com","logo":{"@type":"ImageObject","url":"https://www.instructables.com/assets/img/logo-228x60.png","width":228,"height":60}},"publisher":{"@type":"Organization","name":"Instructables","url":"https://www.instructables.com","logo":{"@type":"ImageObject","url":"https://www.instructables.com/assets/img/logo-228x60.png","width":228,"height":60}},"contributor":{"@type":"Person","name":"opengreenenergy"}}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Circuits","item":{"@type":"WebPage","@id":"https://www.instructables.com/circuits/"}},{"@type":"ListItem","position":2,"name":"Arduino","item":{"@type":"WebPage","@id":"https://www.instructables.com/circuits/arduino/projects/"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"HowTo","name":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)","description":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02): If you are planning to install an off-grid solar system with a battery bank, you\u2019ll need a Solar Charge Controller.  It is a device that is placed between the Solar Panel and the Battery Bank to control the amount of electric energy produced by Sola\u2026","image":{"@type":"ImageObject","url":"https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp","width":1024,"height":853},"step":[{"@type":"HowToStep","name":"Working Principle of a PWM Charge Controller","text":"PWM stands for Pulse Width Modulation, which stands for the method it uses to regulate charge. Its function is to pull down the voltage of the solar panel to near that of the battery to ensure that the battery is properly charged. In other words, th\u2026","image":"https://content.instructables.com/ORIG/F8R/JLE9/K84NHQ0T/F8RJLE9K84NHQ0T.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step1"},{"@type":"HowToStep","name":"How the Circuit Works ?","text":"The heart of the charge controller is an Arduino Nano board. The Arduino senses the solar panel and battery voltages by using two voltage divider circuits. According to these voltage levels, it decides how to charge the battery and control the load.\u2026","image":"https://content.instructables.com/ORIG/FBH/H9NH/K7ZAH7XZ/FBHH9NHK7ZAH7XZ.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step2"},{"@type":"HowToStep","name":"Main Functions of Solar Charge Controller","text":" The charge controller is designed by taking care of the following points. 1. Prevent Battery Overcharge: To limit the energy supplied to the battery by the solar panel when the battery becomes fully charged. This is implemented in charge_cycle() of\u2026","image":"","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step3"},{"@type":"HowToStep","name":"Voltage Measurement","text":"The voltage sensors are used to sense the voltage of solar panel and battery. It is implemented by using two voltage divider circuits. It consists of two resistors R1=100k and R2=20k for sensing the solar panel voltage and similarly R3=100k and R4=2\u2026","image":"https://content.instructables.com/ORIG/FDY/MDO6/K81UMR8P/FDYMDO6K81UMR8P.jpg?auto=webp&fit=bounds&frame=1&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step4"},{"@type":"HowToStep","name":"Current Measurement","text":"For current measurement, I used a Hall Effect current sensor ACS 712 -5A variant. There are three variants of ACS712 Sensor based on the range of its current sensing. The ACS712 sensor reads the current value and converts it into a relevant voltage \u2026","image":"https://content.instructables.com/ORIG/FWA/54KF/K7RRAJTM/FWA54KFK7RRAJTM.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step5"},{"@type":"HowToStep","name":"Temperature Measurement","text":"Why Temperature monitoring is Required? The battery\u2019s chemical reactions change with temperature. As the battery gets warmer, the gassing increases. As the battery gets colder, it becomes more resistant to charging. Depending on how much the battery\u2026","image":"https://content.instructables.com/ORIG/FSZ/IU2V/K7ZAHBXO/FSZIU2VK7ZAHBXO.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step6"},{"@type":"HowToStep","name":"USB Charging Circuit","text":"The buck converter MP2307 used for power supply can deliver current up to 3A. So it has a sufficient margin for charging the USB gadgets. The USB socket VCC is connected to 5V and GND is connected to GND. You can refer to the above schematic.Note: T\u2026","image":"https://content.instructables.com/ORIG/F3U/7WMS/K81UMXGB/F3U7WMSK81UMXGB.png?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step7"},{"@type":"HowToStep","name":"Charging Algorithm","text":"When the controller is connected to the battery, the program will start the operation. Initially, it checks if the panel voltage is sufficient for charging the battery. If yes, then it will enter into the charge cycle. The Charge Cycle consists of 3\u2026","image":"https://content.instructables.com/ORIG/FD4/A7ST/K81UMZFC/FD4A7STK81UMZFC.jpg?auto=webp&fit=bounds&frame=1&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step8"},{"@type":"HowToStep","name":"Load Control","text":"To automatically connect and disconnect the load by monitoring dusk/dawn and battery voltage, load control is used. The primary purpose of load control is to disconnect the load from the battery to protect it from deep discharging. Deep discharging \u2026","image":"","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step9"},{"@type":"HowToStep","name":"Power and Energy","text":"Power: Power is the product of voltage (volt) and current (Amp) P=VxI Unit of power is Watt or KW Energy: Energy is the product of power (watt) and time (Hour) E= Pxt Unit of Energy is Watt Hour or Kilowatt Hour (kWh) To monitor the power and energy\u2026","image":"https://content.instructables.com/ORIG/F2J/0SBK/K84NHIC1/F2J0SBKK84NHIC1.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step10"},{"@type":"HowToStep","name":"Protections","text":"1.Reverse polarity and reverse current protection for solar panel For reverse polarity and reverse current flow protection a Schottky diode (MBR2045) is used.2. Overcharge &amp; Deep discharge protection Overcharge and deep discharge protection are \u2026","image":"https://content.instructables.com/ORIG/FXY/4L15/K84NHIMY/FXY4L15K84NHIMY.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step11"},{"@type":"HowToStep","name":"LED Indications","text":"1. Solar LED: LED1 A bi-color (red/green ) led is used for indicating the solar power staus i.e dusk or dawn. Solar LED ---------------------&gt;Solar Status  GREEN -------------------------&gt; Day RED ---------------------------&gt; Night2. Batter\u2026","image":"https://content.instructables.com/ORIG/FAE/8VDA/K891P6GA/FAE8VDAK891P6GA.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step12"},{"@type":"HowToStep","name":"LCD Display","text":"A 20X4 char LCD is used for monitoring solar panel, battery and load parameters. For simplicity, an I2C LCD display is chosen for this project. It needs only 4 wires to interface with the Arduino.The connection is below: LCD--&gt; ArduinoVCC--&gt; 5\u2026","image":"https://content.instructables.com/ORIG/F8W/4K2K/K891P6DU/F8W4K2KK891P6DU.jpg?auto=webp&fit=bounds&frame=1&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step13"},{"@type":"HowToStep","name":"Prototyping and Testing","text":"1. Breadboard :First, I made the circuit on a Breadboard. The main advantage of a solderless breadboard is that it\u2019s, solderless. Thus you can easily change the design just by unplugging components and leads as you need to. 2. Perforated Board: Afte\u2026","image":"https://content.instructables.com/ORIG/FMM/B80J/K7VYKW1O/FMMB80JK7VYKW1O.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step14"},{"@type":"HowToStep","name":"PCB Design","text":"I have drawn the schematic by using EasyEDA online software after that switched to the PCB layout.All of the components you added in the schematic should be there, stacked on top of each other, ready to be placed and routed. Drag the components by g\u2026","image":"https://content.instructables.com/ORIG/F2E/AE4A/K84NH1H0/F2EAE4AK84NH1H0.jpg?auto=webp&fit=bounds&frame=1&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step15"},{"@type":"HowToStep","name":"Download the Gerber Files","text":"After making the PCB, we have to generate the files that can be sent to a PCB fabrication company that will in due course send us back some real PCB. In EasyEDA You can output the Fabrication Files(Gerber file) via Document &gt; Generate Gerber, or \u2026","image":"https://content.instructables.com/ORIG/FB9/VP3S/K84NH1VC/FB9VP3SK84NH1VC.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step16"},{"@type":"HowToStep","name":"PCB Manufacturing","text":"Now it is time to find out a PCB manufacturer that can turn our Gerber files to a real PCB. I have sent my Gerber files to JLCPCB for manufacturing my PCB. Their service is extremely good. I have received my PCB in India within 10 days.The BOM for t\u2026","image":"https://content.instructables.com/ORIG/FVI/QAOG/K891P6DV/FVIQAOGK891P6DV.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step17"},{"@type":"HowToStep","name":"Soldering the Components","text":"After receiving the board from the PCB fab house, you have to solder the components.For Soldering, you will need a decent Soldering Iron, Solder, Nipper, Desoldering Wicks or Pump and a multimeter. It is good practice to solder the components accord\u2026","image":"https://content.instructables.com/ORIG/FL3/P5U9/K7RRAJT7/FL3P5U9K7RRAJT7.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step18"},{"@type":"HowToStep","name":"Mounting the ACS712 Current Sensor","text":"The ACS712 current sensor I have received has a pre-soldered screw terminal for connection. To solder the module directly on the PCB board, you have to desolder the screw terminal first.I desolder the screw terminal with the help of a desoldering pu\u2026","image":"https://content.instructables.com/ORIG/F30/HMPD/K7RRAJUX/F30HMPDK7RRAJUX.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step19"},{"@type":"HowToStep","name":"Adding the Buck Converter","text":"To solder the Buck Converter module, you have to prepare 4 straight header pins as shown above.Solder the 4 header pins at the X1, 2 are for output and the remaining two are for inputs.","image":"https://content.instructables.com/ORIG/FYQ/LYK0/K7RRAL0N/FYQLYK0K7RRAL0N.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step20"},{"@type":"HowToStep","name":"Adding the Arduino Nano","text":"When you purchase the straight headers, they'll be too long for the Arduino Nano. You'll need to trim them down to an appropriate length. This means 15 pins each.The best way to trim the female header pieces is to count out 15 pins, pull the 16th pi\u2026","image":"https://content.instructables.com/ORIG/FY4/2C0G/K7RRAJTC/FY42C0GK7RRAJTC.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step21"},{"@type":"HowToStep","name":"Preparing the MOSFETs","text":"Before soldering the MOSFETs Q1 Q2 and diode D1 on to the PCB, it is better to attach the heatsinks to them first. Heat sinks are used to move heat away from the device in order to maintain a lower device temperature.Apply a layer of heatsink compou\u2026","image":"https://content.instructables.com/ORIG/FAU/GJOF/K7RRAL0U/FAUGJOFK7RRAL0U.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step22"},{"@type":"HowToStep","name":"Mounting the Standoffs","text":"After soldering all the parts, mount the standoffs at 4 corners. I used M3 Brass Hex Standoffs.The use of standoffs will provide sufficient clearance to the soldering joints and wires from the ground.","image":"https://content.instructables.com/ORIG/F4N/3DID/K7RRAJVY/F4N3DIDK7RRAJVY.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step23"},{"@type":"HowToStep","name":"Software & Libraries","text":"First, download the attached Arduino Code. Then download the following libraries and install them.1. One Wire2. DallasTemperature3. LiquidCrystal_I2C4. PID LibraryThe entire code is broken into the small functional block for flexibility. Suppose the\u2026","image":"https://content.instructables.com/ORIG/FMF/6PPJ/K84NHFG8/FMF6PPJK84NHFG8.jpg?auto=webp&fit=bounds&frame=1","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step24"},{"@type":"HowToStep","name":"Final Testing ","text":"Connect the Charge Controller battery terminals ( BAT ) to a 12V battery. Be sure the polarity is correct. After connection, the LED and LCD will start working immediately. You will also notice the battery voltage and temperature on the 2nd row of t\u2026","image":"https://content.instructables.com/ORIG/F28/64OH/K891P6DW/F2864OHK891P6DW.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024","url":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/#step25"}]}</script><link href="/assets/BUNDLES/global_desktop_bs2_css.min.css?c=1a61c9e419" rel="stylesheet" type="text/css"/><link href="/assets/scss/global.css?c=1a61c9e419" rel="stylesheet" type="text/css"/><link href="/assets/BUNDLES/ible_desktop_css.min.css?c=1a61c9e419" rel="stylesheet" type="text/css"/><link href="/assets/scss/instructable.css?c=1a61c9e419" rel="stylesheet" type="text/css"/></head><body class="category-theme-circuits "><div id="site-announcements" class="site-announcements"><div class="site-announcements-content"></div></div><header id="site-header" class="site-header nopin site-header-circuits"><div class="site-header-top"><div class="left-col"><nav class="site-header-nav site-header-primary-nav" aria-label="Categories menu"><ul><li><a class="site-header-nav-home" href="/"><span class="sr-only">Home</span><span class="category-icon icon-category-living"></span></a></li><li><a
                            class="category-nav-link active"
                            href="/circuits/">Circuits</a></li><li><a
                            class="category-nav-link "
                            href="/workshop/">Workshop</a></li><li><a
                            class="category-nav-link "
                            href="/craft/">Craft</a></li><li><a
                            class="category-nav-link "
                            href="/cooking/">Cooking</a></li><li><a
                            class="category-nav-link "
                            href="/living/">Living</a></li><li><a
                            class="category-nav-link "
                            href="/outside/">Outside</a></li><li><a
                            class="category-nav-link "
                            href="/teachers/">Teachers</a></li></ul></nav></div><div id="you-menu-container" class="right-col"><span class="site-header-nav-feed-link" style="display: none;"><a class="category-nav-link feed-link" rel="nofollow" href="/feed/">Following</a></span></div></div><div class="site-header-bottom"><div class="left-col"><a class="site-logo site-logo-category" href="/circuits/"><img class="instructables-logo" alt="Instructables" src="/assets/img/instructables-logo-v2.png"/><span class="site-header-category-brand">instructables</span><span class="site-header-category category-circuits">circuits</span></a><a href="/circuits/projects/" class="btn btn-category-header">Projects</a><a href="/contest/" class="btn btn-category-header">Contests</a></div><div class="right-col"><nav class="site-header-nav site-header-secondary-nav" aria-label="Contest and classes"><ul><li><a class="site-header-secondary-link" href="/create/">Publish</a></li></ul></nav><form id="header-search-form" class="site-search-form" title="Search Form" action="/circuits/howto/" method="get"><label class="sr-only" for="site-search-input">Enter search term</label><input class="input-medium site-search-input" id="site-search-input" type="text" placeholder="Let's Make..."/><button class="submit-btn" type="submit"><i class="icon-search1"></i></button></form></div></div></header><main><article id="article" class="full-wrapper category-content-circuits"><header class="article-header" data-location="header"><h1 class="header-title">ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)</h1><div class="sub-header"><div class="header-byline">
            By <a href="/member/opengreenenergy/" rel="author">opengreenenergy</a>
            
                in <a class="category" href="/circuits/">Circuits</a><a class="channel" href="/circuits/arduino/projects/">Arduino</a></div><div class="header-stats"><p class="svg-views view-count">55,810</p><p class="svg-favorite active favorite-count">289</p><p class="svg-comments active comment-count">91</p><p class="svg-featured">Featured</p></div></div><div class="sub-header clearfix"><div class="header-meta"><span class="posted-date"></span><button class="license-btn" data-url="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="license" src="/assets/img/license/by-nc-sa_small.png"/></button></div><div class="header-actions"><button class="btn btn-default pdf-btn login-required" data-sourcea="download"><i class="svg-icon svg-pdf"></i>Download</button><button class="btn btn-default favorite-btn"><i class="svg-icon svg-favorite"></i><span class="favorite-txt">Favorite</span></button></div></div></header><div class="article-body"><div class="main-content"><section id="intro" class="step" data-stepid="SRIY3DKK7NSUYRY"><h2 class="step-title sr-only">Introduction: ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="author-promo clearfix"><div class="author-promo-row"><div class="byline"><a class="avatar" rel="author" href="/member/opengreenenergy/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" src="/assets/img/pixel.png" alt="opengreenenergy"><noscript><img  src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" alt="opengreenenergy"/></noscript></a><span class="author-name">By <a class="author" rel="author" href="/member/opengreenenergy/">opengreenenergy</a></span><a class="author-site" rel="noreferrer" href="https://www.opengreenenergy.com/" target="_blank">Open Green Energy</a><span class="author-follow"><button class="btn btn-yellow follow-btn">Follow</button></span></div></div><div class="recent-ibles promoted-content clearfix "><span class="promoted-items-label">
                More by the author:
            </span><div class="promoted-items list-unstyled pull-right"><div data-id="" class="promoted-item-thumbnail thumbnail instructable-thumbnail"><div class="image-wrapper"><a href="/DIY-Mini-UPS-for-WiFi-Router-V50/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/F3B/UMW8/KT37WM7G/F3BUMW8KT37WM7G.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" src="/assets/img/pixel.png" alt="DIY Mini UPS for WiFi Router V5.0"><noscript><img  src="https://content.instructables.com/ORIG/F3B/UMW8/KT37WM7G/F3BUMW8KT37WM7G.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" alt="DIY Mini UPS for WiFi Router V5.0"/></noscript></a></div></div><div data-id="" class="promoted-item-thumbnail thumbnail instructable-thumbnail"><div class="image-wrapper"><a href="/ESP8266-Weather-Widget-V20/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FVG/CFZC/KS62P9C4/FVGCFZCKS62P9C4.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" src="/assets/img/pixel.png" alt="ESP8266 Weather Widget V2.0"><noscript><img  src="https://content.instructables.com/ORIG/FVG/CFZC/KS62P9C4/FVGCFZCKS62P9C4.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" alt="ESP8266 Weather Widget V2.0"/></noscript></a></div></div><div data-id="" class="promoted-item-thumbnail thumbnail instructable-thumbnail"><div class="image-wrapper"><a href="/Build-Your-Own-DIY-3D-Printed-Soldering-Fume-Extra/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/F20/NWB6/KRAN0KJ6/F20NWB6KRAN0KJ6.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" src="/assets/img/pixel.png" alt="DIY 3D-Printed Soldering Fume Extractor"><noscript><img  src="https://content.instructables.com/ORIG/F20/NWB6/KRAN0KJ6/F20NWB6KRAN0KJ6.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=130" alt="DIY 3D-Printed Soldering Fume Extractor"/></noscript></a></div></div></div></div><div class="about about-full">
            
                
                    About: I am a DIY hobbyist by passion and Power Engineer by profession. Most of my works are related to Solar Energy and Arduino.   Apart from Electronics I love 3D printing, Woodworking and to make crafts from used …
                
            
            <span class="author-link"><a class="more-link" rel="author" href="/member/opengreenenergy/">More About opengreenenergy &raquo;</a></span></div></div><div class="step-body"><p><a href="https://www.banggood.in/custlink/v3G3M9ZGNf" rel="nofollow"></a><a href="https://www.banggood.in/custlink/DGGKUI8Ksj" rel="nofollow"></a>If you are planning to install an off-grid solar system with a battery bank, you’ll need a Solar Charge Controller.  It is a device that is placed between the Solar Panel and the Battery Bank to control the amount of electric energy produced by Solar panels going into the batteries.  The main function is to make sure that the battery is properly charged and protected from overcharging. <br/> As the input voltage from the solar panel rises, the charge controller regulates the charge to the batteries preventing any overcharging and disconnect the load when the battery is discharged.</p><p>You can go through my Solar projects on my website: <a href="https://www.opengreenenergy.com/" rel="nofollow">www.opengreenenergy.com</a> and YouTube Channel: <a href="http://www.youtube.com/c/opengreenenergy" rel="nofollow">Open Green Energy</a></p><p><strong>Types of solar charge controllers</strong></p><p>There are currently two types of charge controllers commonly used in PV power systems : </p><p><em>1. Pulse Width Modulation (PWM) controller</em></p><p><em>2. Maximum Power Point Tracking (MPPT) controller</em></p><p>In this Instructable, I will explain to you about the PWM Solar Charge Controller. I have posted few articles on PWM charge controllers earlier too. The earlier version of my solar charge controllers are quite popular on the internet and useful for people all around the globe. </p><p>By considering the comments and questions from my earlier versions, I have modified my existing <a href="https://www.instructables.com/id/ARDUINO-SOLAR-CHARGE-CONTROLLER-Version-20/" rel="nofollow">V2.0 PWM Charge Controller</a> to make the new version 2.02.</p><p><em><strong><u>The following are the changes in V2.02 w.r.t V2.0: </u></strong></em></p><p>1. The low efficient linear voltage regulator is replaced by buck converter MP2307 for 5V power supply.</p><p>2. One additional current sensor to monitor current coming from the solar panel.</p><p>3. MOSFET-IRF9540 is replaced by IRF4905 for better performance.</p><p>4. Onboard LM35 temp-sensor is replaced by a DS18B20 probe for accurate battery temperature monitoring.</p><p>5. USB port for charging smart devices.</p><p>6. Use of single fuse instead of two</p><p>7. One additional LED to indicate Solar Power Status.</p><p>8.Implementation of 3 stages charging algorithm.</p><p>9.Implementation of PID controller in the charging algorithm</p><p>10. Made a custom PCB for the project</p><p><strong><u>Specification</u></strong></p><p>1.Charge controller as well as energy meter</p><p>2. Automatic Battery Voltage Selection (6V/12V)</p><p>3.PWM charging algorithm with auto charge setpoint according to the battery voltage</p><p>4.LED indication for the state of charge and load status</p><p>5. 20x4 character LCD display for displaying voltages, current, power, energy, and temperature.</p><p>6.Lightning protection</p><p>7.Reverse current flow protection</p><p>8.Short Circuit and Overload protection </p><p>9. Temperature Compensation for Charging </p><p>10. USB port for Charging Gadgets</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="stepsupplies" class="step" data-stepid=""><h2 class="step-title">Supplies</h2><div class="step-body"><p>You can order the PCB V2.02 from <a href="https://www.pcbway.com/project/shareproject/ARDUINO_PWM_SOLAR_CHARGE_CONTROLLER___V_2_02_.html" rel="nofollow">PCBWay</a></p><p><a href="https://www.pcbway.com/project/shareproject/ARDUINO_PWM_SOLAR_CHARGE_CONTROLLER___V_2_02_.html" rel="nofollow"></a></p><p>1. Arduino Nano (<a href="https://amzn.to/3a8rkF9" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/mmGvMI9mlo" rel="nofollow">Banggood</a>)</p><p>2.P-MOSFET - IRF4905  ( <a href="https://amzn.to/2wpN9kR" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/DGD3kSZmas" rel="nofollow">Banggood</a> ) </p><p>3.Power diode -MBR2045( <a href="https://amzn.to/2IZZf73" rel="nofollow">Amazon</a> / <a href="https://www.aliexpress.com/item/33037450545.html?spm=a2g0o.productlist.0.0.2d096bbbdnALTQ&amp;algo_pvid=449badb3-b4fa-4c9e-b76c-f943c0f835cb&amp;algo_expid=449badb3-b4fa-4c9e-b76c-f943c0f835cb-0&amp;btsid=0ab50f6215850665556852775e551b&amp;ws_ab_test=searchweb0_0,searchweb201602_,searchweb201603_" rel="nofollow">Aliexpress</a>) </p><p>4.Buck Converter-MP2307( <a href="https://amzn.to/2xP1IyM" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/GmmDzI8Dgh" rel="nofollow">Banggood</a>) </p><p>5.Temperature Sensor - DS18B20 ( <a href="https://amzn.to/398hjX8" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/DDv329iKBV" rel="nofollow">Banggood</a>) </p><p>6.Current Sensor - ACS712 ( <a href="https://amzn.to/2UpupKb" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/mv3vz8imgO" rel="nofollow">Banggood</a>) </p><p>7.TVS diode- P6KE36CA ( <a href="https://amzn.to/2xaVV6x" rel="nofollow">Amazon</a> / <a href="https://www.aliexpress.com/item/32409284088.html?spm=a2g0o.productlist.0.0.348af8f6HbVFRH&amp;algo_pvid=18a37f2d-2f7c-4a1a-944b-afdb55b09319&amp;algo_expid=18a37f2d-2f7c-4a1a-944b-afdb55b09319-1&amp;btsid=0ab6f83915850668702727321e2369&amp;ws_ab_test=searchweb0_0,searchweb201602_,searchweb201603_" rel="nofollow">Aliexpress</a>) </p><p>8.Transistors - 2N3904 (<a href="https://amzn.to/2J3bzTW" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/mm3Gk89vQH" rel="nofollow">Banggood </a>)</p><p> 9.Resistors ( 100k x 2, 20k x 2,10k x 2,1k x 2, 330ohm x 7) ( <a href="https://amzn.to/2U4fYfJ" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/DGGKUI8Ksj" rel="nofollow">Banggood</a> )</p><p>10.Ceramic Capacitors (0.1uF x 2) ( <a href="https://amzn.to/2U7knyK" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/v3G3M9ZGNf" rel="nofollow">Banggood</a> )</p><p>11. 20x4 I2C LCD ( <a href="https://amzn.to/33vVeR6" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/vGK3MiSRRD" rel="nofollow">Banggood</a>) </p><p>12.RGB LED ( <a href="https://amzn.to/2wqBdiK" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/3K33MI8ddE" rel="nofollow">Banggood</a>) </p><p>13.Bi-Color LED ( <a href="https://amzn.to/33zrgM0" rel="nofollow">Amazon</a> ) </p><p>15.Jumper Wires/Wires ( <a href="https://amzn.to/390KnzL" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/3KDDz8IdEC" rel="nofollow">Banggood</a>) </p><p>16.Header Pins ( <a href="https://amzn.to/2WtT2IA" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/GvK3zIIEyw" rel="nofollow">Banggood</a> ) </p><p>17.Heat Sinks ( <a href="https://amzn.to/3b8Kaw3" rel="nofollow">Amazon</a> / <a href="https://www.aliexpress.com/item/32923541255.html?spm=a2g0s.9042311.0.0.27424c4d8IPTtM" rel="nofollow">Aliexpress</a>) </p><p>18.Fuse Holder and fuses ( <a href="https://amzn.to/3a7hYJV" rel="nofollow">Amazon</a> ) </p><p>19.Push Button ( <a href="https://amzn.to/2x7tdU6" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/mKmK29SYFb" rel="nofollow">Banggood</a> )</p><p>22.Screw terminals 1x6 pin ( <a href="https://www.aliexpress.com/item/32963802060.html?spm=a2g0s.9042311.0.0.27424c4d862aP3" rel="nofollow">Aliexpress</a>) </p><p>23.PCB Standoffs ( <a href="https://www.banggood.in/custlink/KmDK2Z8hjp" rel="nofollow">Banggood</a> ) </p><p>24. USB Socket ( <a href="https://amzn.to/2J3Is33" rel="nofollow">Amazon</a> / <a href="https://www.banggood.in/custlink/3vmmkiiYj0" rel="nofollow">Banggood</a> )</p><p><strong><u>Tools :</u></strong></p><p>1.Soldering Iron ( <a href="https://amzn.to/3a7vzRj" rel="nofollow">Amazon</a> ) </p><p>2. Desoldering Pump ( <a href="https://amzn.to/392ubhp" rel="nofollow">Amazon</a> )</p><p>2.Wire Cutter and Stripper (<a href="https://amzn.to/391y2vr" rel="nofollow"> Amazon</a> )</p><p> 3.Screw Driver ( <a href="https://amzn.to/2we3tp1" rel="nofollow">Amazon</a> ) </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step1" class="step" data-stepid="STW7V77K84NHPJB"><h2 class="step-title">Step 1: Working Principle of a PWM Charge Controller</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Working Principle of a PWM Charge Controller" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>PWM stands for Pulse Width Modulation, which stands for the method it uses to regulate charge. Its function is to pull down the voltage of the solar panel to near that of the battery to ensure that the battery is properly charged. In other words, they lock the solar panel voltage to the battery voltage by dragging the Solar panel Vmp down to the battery system voltage with no change in the current.</p><p>It uses an electronics switch ( MOSFET ) to connect and disconnect the solar panel with the battery. By switching the MOSFET at high frequency with various pulse widths, a constant voltage can be maintained. The PWM controller self-adjusts by varying the widths (lengths) and frequency of the pulses sent to the battery.</p><p>When the width is at 100%, the MOSFET is at full ON, allowing the solar panel to bulk charge the battery. When the width is at 0% the transistor is OFF open circuiting the Solar panel preventing any current from flowing to the battery when the battery is fully charged.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step2" class="step" data-stepid="S7ASRP8K7NSUYV9"><h2 class="step-title">Step 2: How the Circuit Works ?</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="How the Circuit Works ?" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="How the Circuit Works ?" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>The heart of the charge controller is an Arduino Nano board. The Arduino senses the solar panel and battery voltages by using two voltage divider circuits. According to these voltage levels, it decides how to charge the battery and control the load.</p><p><em><strong>Note</strong></em> : In the above picture, there is typographical error in power and control signal. The redline is for power and yellow line is for control signal.</p><p> The whole schematic is divided into the following circuits:</p><p><strong><u>1. Power Distribution Circuit:</u></strong></p><p>The power from the battery ( B+ &amp; B- ) is step down to 5V by the X1 ( MP2307) buck converter. The output from the buck converter is distributed to </p><p>1. Arduino Board </p><p>2. LEDs for indication </p><p>3. LCD display </p><p>4. USB port to charge gadgets.</p><p><strong><u>2. Input Sensors:</u></strong></p><p>The solar panel and battery voltages are sensed by using two voltage divider circuits consisting of resistors R1-R2 &amp; R3- R4. C1 and C2 are filter capacitors to filter out the unwanted noise signals. The output from the voltage dividers is connected to Arduino analog pins A0 and A1 respectively.</p><p>The solar panel and load currents are sensed by using two ACS712 modules. The output from the current sensors is connected to Arduino analog pin A3 and A2 respectively.</p><p>The battery temperature is measured by using a DS18B20 temperature sensor. R16 (4.7K ) is a pull-up resistor. The output of the temperature sensor is connected to Arduino Digital pin D12.</p><p><strong><u>3. Control Circuits: </u></strong></p><p>The control circuits are basically formed by two p-MOSFETs  Q1 and Q2. The MOSFET Q1 is used to send the charging pulse to the battery and MOSFET Q2 is used to drive the load.  Two MOSFET driver circuits are consist of two transistors T1 and T2 with pull-up resistors R6 and R8. The base current of the transistors is controlled by resistors R5 and R7.</p><p><strong><u>4. Protections Circuits:</u></strong></p><p>The input overvoltage from the solar panel side is protected by using a TVS diode D1. The reverse current from the battery to the solar panel is protected by a Schottky diode D2. The overcurrent is protected by a fuse F1.</p><p><strong><u>5. LED Indication:</u></strong></p><p>LED1, LED2, and LED3 are used to indicate solar, battery and load status respectively. Resistors R9 to R15 are current limiting resistors.</p><p><strong><u>7. LCD Display: </u></strong></p><p>An I2C LCD display is used to display various parameters.</p><p><strong><u>8. USB Charging:</u></strong></p><p>The USB socket is hooked up to 5V output from the Buck Converter.</p><p><u><strong>9. System Reset:</strong></u></p><p>SW1 is a push button to reset the Arduino.</p><p>You can download the schematic in PDF format attached below.</p></div><div class="downloads"><h3 class="sr-only">Attachments</h3><ul id="attachments" class="ible-files unstyled list-unstyled"><li class="file-info clearfix"><a class="thumb-wrapper" href="https://content.instructables.com/ORIG/FBF/G1O4/K7ZAH87I/FBFG1O4K7ZAH87I.pdf" download="Schematic_Arduino Solar Charge Controller V2.0_Sheet_1_20200320104815.pdf"><span class="file-thumb"><img class="lazyload tiny-img" data-src="https://content.instructables.com/static/image/attachment-PDF.png" src="/assets/img/pixel.png" alt="download {{ file.name }}"><noscript><img class="tiny-img" src="https://content.instructables.com/static/image/attachment-PDF.png" alt="download {{ file.name }}"/></noscript></span><span class="title">Schematic_Arduino Solar Charge Controller V2.0_Sheet_1_20200320104815.pdf</span></a><div class="file-actions"><a href="https://content.instructables.com/ORIG/FBF/G1O4/K7ZAH87I/FBFG1O4K7ZAH87I.pdf" download="Schematic_Arduino Solar Charge Controller V2.0_Sheet_1_20200320104815.pdf" class="btn pull-right">Download</a></div></li></ul></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step3" class="step" data-stepid="SOD5D3TK7VYKOBB"><h2 class="step-title">Step 3: Main Functions of Solar Charge Controller</h2><div class="step-body"><p> The charge controller is designed by taking care of the following points. </p><p><strong>1. Prevent Battery Overcharge: </strong>To limit the energy supplied to the battery by the solar panel when the battery becomes fully charged. This is implemented in charge_cycle() of my code. </p><p><strong>2. Prevent Battery Over-discharge:</strong> To disconnect the battery from electrical loads when the battery reaches a low state of charge. This is implemented in load_control() of my code.</p><p><strong> 3. Provide Load Control Functions:</strong> To automatically connect and disconnect an electrical load at a specified time. The load will ON when the sunset and OFF when sunrise. This is implemented in load_control() of my code. 4.Monitoring Power and Energy: To monitor the load power and energy and display it. </p><p><strong>5. Protect from abnormal Condition:</strong> To protect the circuit from the different abnormal situations like lightning, overvoltage, overcurrent, and short circuit, etc.</p><p><strong>6.Indicating and Displaying:</strong> To indicate and display the various parameters </p><p><strong>7.Serial Communication:</strong> To print various parameters in the serial monitor</p><p><strong>8. USB Charging:</strong> To charge smart devices </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step4" class="step" data-stepid="SAUENHOK7VYKOP1"><h2 class="step-title">Step 4: Voltage Measurement</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Voltage Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>The voltage sensors are used to sense the voltage of solar panel and battery. It is implemented by using two voltage divider circuits. It consists of two resistors R1=100k and R2=20k for sensing the solar panel voltage and similarly R3=100k and R4=20k for battery voltage. The output from the R1and R2 is connected to Arduino analog pin A0 and output from the R3 and R4 is connected to Arduino analog pin A1.</p><p><strong>Voltage Measurement :</strong><br/>Arduino’s analog inputs can be used to measure DC voltage between 0 and 5V (when using the standard 5V analog reference voltage) and this range can be increased by using a voltage divider network. The voltage divider steps down the voltage being measured within the range of the Arduino analog inputs. </p><p> For a voltage divider circuit Vout = R2/(R1+R2) x Vin </p><p>Vin = (R1+R2)/R2 x Vout</p><p> The analogRead() function reads the voltage and converts it to a number between 0 and 1023</p><p><strong>Calibration :</strong><br/>We’re going to read output value with one of the analog inputs of Arduino and its analogRead() function. That function outputs a value between 0 and 1023 that is 0.00488V for each increment (As 5/1024 = 0.00488V) </p><p>Vin = Vout*(R1+R2)/R2 ; R1=100k and R2=20k </p><p>Vin= ADC count*0.00488*(120/20) Volt // Highlighted part is Scale factor</p><p><strong><em>Note:</em></strong> This leads us to believe that a reading of 1023 corresponds to an input voltage of exactly 5.0 volts. In practical you may not get 5V always from the Arduino pin 5V. So during calibration first measure the voltage between the 5v and GND pins of Arduino by using a multimeter, and use scale factor by using the below formula: </p><p>Scale factor = measured voltage/1024 </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step5" class="step" data-stepid="SBQW99EK7VYKXBZ"><h2 class="step-title">Step 5: Current Measurement</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Current Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Current Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Current Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>For current measurement, I used a Hall Effect current sensor ACS 712 -5A variant. There are three variants of ACS712 Sensor based on the range of its current sensing. The ACS712 sensor reads the current value and converts it into a relevant voltage value, The value that links the two measurements is <em>Sensitivity.</em> The output sensitivity for all variant are as follows:</p><p><strong>ACS712 Model - &gt;  Current Range- &gt; Sensitivity</strong></p><p>ACS712  ELC-05 - &gt;    +/- 5A     - &gt; 185 mV/A </p><p>ACS712 ELC-20  - &gt;    +/- 20A   - &gt; 100 mV/A </p><p>ACS712 ELC-30 - &gt;      +/- 30A    - &gt; 66 mV/A</p><p>In this project, I have used the 5A variant,  for which sensitivity is 185mV/A and the middle sensing voltage is 2.5V when no current.</p><p><strong>Calibration:</strong></p><p>analog read value = analogRead(Pin);</p><p>Value = (5/1024)*analog read value // If you are not getting 5V from Arduino 5V pin then,</p><p>Current in amp  = (Value – offsetVoltage) / sensitivity</p><p>But as per data sheets offset voltage is 2.5V and sensitivity is 185mV/A</p><p>Current in amp = (Value-2.5)/0.185</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step6" class="step" data-stepid="S6SVVMCK7VYKP9M"><h2 class="step-title">Step 6: Temperature Measurement</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Temperature Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Temperature Measurement" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p><em><strong><u>Why Temperature monitoring is Required? </u></strong></em></p><p>The battery’s chemical reactions change with temperature. As the battery gets warmer, the gassing increases. As the battery gets colder, it becomes more resistant to charging. Depending on how much the battery temperature varies, it is important to adjust the charging for temperature changes. So it is important to adjust charging to account for the temperature effects. The temperature sensor will measure the battery temperature, and the Solar Charge Controller uses this input to adjust the charge set point as required. The compensation value is - 5mv /degC/cell for lead-acid type batteries. (–30mV/ºC for 12V and 15mV/ºC for 6V battery).The negative sign of temperature compensation indicates an increase in temperature requires a reduction in charge setpoint. For more details, you may follow <a href="https://batteryuniversity.com/learn/article/charging_at_high_and_low_temperatures" rel="nofollow">this article</a>.</p><p><strong><u>Temperature Measurement by DS18B20 </u></strong></p><p>I have used an external DS18B20 probe for measuring the battery temperature. It uses a one-wire protocol to communicate with the microcontroller. It can be hooked up in port-J4 on the board.</p><p>To interface with the DS18B20 temperature sensor, you need to install the <a href="https://github.com/PaulStoffregen/OneWire" rel="nofollow">One Wire library</a> and the <a href="https://github.com/milesburton/Arduino-Temperature-Control-Library" rel="nofollow">Dallas Temperature library</a>.</p><p>You can read <a href="https://learn.adafruit.com/using-ds18b20-temperature-sensor-with-circuitpython/overview" rel="nofollow">this article</a> for more details on the DS18B20 sensor.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step7" class="step" data-stepid="SPJ2J0WK7VYKZ30"><h2 class="step-title">Step 7: USB Charging Circuit</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="USB Charging Circuit" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="USB Charging Circuit" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>The buck converter MP2307 used for power supply can deliver current up to 3A. So it has a sufficient margin for charging the USB gadgets. The USB socket VCC is connected to 5V and GND is connected to GND. You can refer to the above schematic.</p><p><strong>Note: </strong><em>The USB output voltage not maintained to 5V when the load current exceeds 1A. So </em><em>I would recommend limiting the USB load below 1A.</em></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step8" class="step" data-stepid="SMYYHLWK7VYKQ44"><h2 class="step-title">Step 8: Charging Algorithm</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Charging Algorithm" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>When the controller is connected to the battery, the program will start the operation. Initially, it checks if the panel voltage is sufficient for charging the battery. If yes, then it will enter into the charge cycle. The Charge Cycle consists of 3 stages.</p><p><strong>Stage 1 Bulk charge: </strong></p><p>Arduino will connect the Solar Panel to the battery directly ( 99 % duty cycle). The battery voltage will increase gradually. When the battery voltage reaches 14.4V, stage 2 will begin.</p><p>In this stage, the current is almost constant.</p><p><strong>Stage 2 Absorption charge: </strong></p><p>In this stage, Arduino will regulate the charging current by maintaining the voltage level at 14.4 for one hour. The voltage is kept constant by adjusting the duty cycle. </p><p><strong>Stage 3 Float charge: </strong></p><p>The controller generates the trickle charge to maintain the voltage level at 13.5V. This stage keeps the battery to be fully charged. If the battery voltage is less than 13.2V for 10mins.</p><p>The charge cycle will be repeated.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step9" class="step" data-stepid="SXM4SJQK7VYKQE4"><h2 class="step-title">Step 9: Load Control</h2><div class="step-body"><p>To automatically connect and disconnect the load by monitoring dusk/dawn and battery voltage, load control is used. </p><p>The primary purpose of load control is to disconnect the load from the battery to protect it from deep discharging. Deep discharging could damage the battery. </p><p>The DC load terminal is designed for low power DC load such as street light. </p><p>The PV panel itself is used as the light sensor. </p><p>Assuming solar panel voltage &gt; 5V means dawn and when &lt; 5V dusk.</p><p><strong>ON Condition:</strong> In the evening, when the PV voltage level falls below 5V and the battery voltage is higher than the LVD setting, the controller will turn on the load and the load green led will glow. </p><p><strong>OFF Condition:</strong> The load will cut off in the following two conditions. </p><p>1. In the morning when the PV voltage is larger than 5v,</p><p> 2.When the battery voltage is lower than the LVD setting The load red led ON indicates that the load is cut off. </p><p>LVD is referred to as Low Voltage Disconnect</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step10" class="step" data-stepid="SMVAW3DK7VYKQR2"><h2 class="step-title">Step 10: Power and Energy</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Power and Energy" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p><strong>Power:</strong> Power is the product of voltage (volt) and current (Amp) </p><p>P=VxI Unit of power is Watt or KW </p><p><strong>Energy:</strong> Energy is the product of power (watt) and time (Hour) </p><p>E= Pxt Unit of Energy is Watt Hour or Kilowatt Hour (kWh) </p><p>To monitor the power and energy above logic is implemented in software and the parameters are displayed in a 20x4 char LCD.</p><p>Image credit:<a href="https://imgoat.com/uploads/97da629b09/106447.jpg" rel="nofollow"> imgoat</a></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step11" class="step" data-stepid="S9YIB2PK7VYKQV8"><h2 class="step-title">Step 11: Protections</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Protections" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p><strong>1.Reverse polarity and reverse current protection for solar panel </strong></p><p>For reverse polarity and reverse current flow protection a Schottky diode (MBR2045) is used.</p><p><strong>2. Overcharge &amp; Deep discharge protection </strong></p><p>Overcharge and deep discharge protection are implemented by the software.</p><p><strong>3. Short circuit and overload protection </strong></p><p>Short circuit and overload protection is realized by a fuse F1.</p><p><strong>4.Overvoltage protection at solar panel input </strong></p><p>Temporary overvoltages occur in power systems for a variety of reasons, but lightning causes the most severe overvoltages. This is particularly true with PV systems due to the exposed locations and system connecting cables. In this new design, I used a 600-watt bidirectional TVS diode (P6KE36CA ) to suppress the lightning and overvoltage at the PV terminals. </p><p>image credit: <a href="https://www.freeimages.co.uk/galleries/workplace/energy/slides/electric_danger.htm" rel="nofollow">freeimages</a></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step12" class="step" data-stepid="S6OSNILK7VYKR1C"><h2 class="step-title">Step 12: LED Indications</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="LED Indications" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p><strong><u>1. Solar LED: LED1 </u></strong><br/>A bi-color (red/green ) led is used for indicating the solar power staus i.e dusk or dawn. </p><p><em><strong>Solar LED ---------------------&gt;Solar Status  </strong></em></p><p>GREEN -------------------------&gt; Day </p><p>RED ---------------------------&gt; Night</p><p><strong><u>2. Battery State Of Charge (SOC) LED: LED2</u></strong></p><p>One important parameter that defines the energy content of the battery is the State of Charge (SOC). This parameter indicates how much charge is available in the battery. RGB LED is used to indicate the battery state of charge. For connection refer to the above schematic. </p><p><strong><em>Battery LED ------------&gt;Battery Status</em></strong></p><p> RED --------------------&gt; Voltage is LOW </p><p>GREEN --------------------&gt; Voltage is Healthy</p><p> BLUE --------------------&gt; Fully Charged </p><p><strong><u>2. Load LED: LED3</u></strong></p><p>A bi-color (red/green) led is used for load status indication. Refer to the above schematic for connection. </p><p><strong><em>Load LED ---------------------&gt;Load Status </em></strong></p><p>GREEN -------------------------&gt; Connected (ON) </p><p>RED ---------------------------&gt; Disconnected (OFF) </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step13" class="step" data-stepid="S0VZKP1K7VYKR5A"><h2 class="step-title">Step 13: LCD Display</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="LCD Display" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="LCD Display" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>A 20X4 char LCD is used for monitoring solar panel, battery and load parameters.</p><p> For simplicity, an I2C LCD display is chosen for this project. It needs only 4 wires to interface with the Arduino.</p><p>The connection is below: </p><p><strong><em><u>LCD--&gt; Arduino</u></em></strong></p><p>VCC--&gt; 5V , </p><p>GND--&gt;GND,</p><p> SDA--&gt;A4,</p><p>SCL--&gt;A5 </p><p>Row-1: Solar panel voltage, Current and Power </p><p>Row-2: Battery Voltage, Temperature, and Charger status ( Charging / Not Charging )</p><p>Row-3: Load current, power, and load status</p><p>Row-4: Input Energy from Solar panel and Energy consumed by the load.</p><p>You have to download the library from <a href="https://bitbucket.org/fmalpartida/new-liquidcrystal/downloads/" rel="nofollow">LiquidCrystal_I2C</a>.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step14" class="step" data-stepid="SDNDMSRK7VYKK0O"><h2 class="step-title">Step 14: Prototyping and Testing</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Prototyping and Testing" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Prototyping and Testing" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p><strong>1. Breadboard :</strong></p><p>First, I made the circuit on a Breadboard. The main advantage of a solderless breadboard is that it’s, solderless. Thus you can easily change the design just by unplugging components and leads as you need to. </p><p><strong>2. Perforated Board: </strong></p><p>After making the breadboard testing, I made the circuit on a <a href="https://www.instructables.com/id/ARDUINO-SOLAR-CHARGE-CONTROLLER-Version-20/" rel="nofollow">Perforated Board</a>. To make it follow the instruction below</p><p> i) First insert all the parts into the hole of the Perforated-Board. </p><p>ii) Solder all the component pads and trim the extra legs by a nipper.</p><p> iii) Connect the soldering pads by using wires as per the schematic.</p><p> iv) Use standoff to isolate the circuit from the ground.</p><p> The perforated board circuit is really strong and can be deployed in a project permanently. After testing the prototype, if everything works perfectly we can move to design the final PCB. </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step15" class="step" data-stepid="SNYKOF7K7VYKKQ0"><h2 class="step-title">Step 15: PCB Design</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="PCB Design" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="PCB Design" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>I have drawn the schematic by using <a href="https://easyeda.com/" rel="nofollow">EasyEDA</a> online software after that switched to the PCB layout.</p><p>All of the components you added in the schematic should be there, stacked on top of each other, ready to be placed and routed. Drag the components by grabbing on its pads. Then place it inside the rectangular borderline. </p><p>Arrange all the components in such a way that the board occupies minimum space. Smaller the board size, the cheaper will be the PCB manufacturing cost. It will be useful if this board has some mounting holes on it so that it can be mounted in an enclosure. </p><p>Now you have to route. Routing is the most fun part of this entire process. It’s like solving a puzzle! Using the tracking tool we need to connect all the components. You can use both the top and the bottom layer for avoiding overlap between two different tracks and making the tracks shorter. </p><p>You can use the Silk layer to add text to the board. Also, we are able to insert an image file, so I add an image of my website logo to be printed on the board. In the end, using the copper area tool, we need to create the ground area of the PCB. </p><p>Now the PCB is ready for manufacturing. </p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step16" class="step" data-stepid="STT4SIXK7VYKLYN"><h2 class="step-title">Step 16: Download the Gerber Files</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Download the Gerber Files" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>After making the PCB, we have to generate the files that can be sent to a PCB fabrication company that will in due course send us back some real PCB. </p><p>In <a href="https://easyeda.com/" rel="nofollow">EasyEDA</a> You can output the Fabrication Files(Gerber file) via Document &gt; Generate Gerber, or by clicking the Generate Gerber button from the toolbar. The generated Gerber file is a compressed package. After decompression, you can see the following 8 files:</p><p>1. Bottom Copper: .gbl </p><p>2. Top Copper: .gtl </p><p>3. Bottom Soldering Masks: .gbs</p><p> 4.Top Soldering Masks: .gts </p><p>5. Bottom Silk Screen: .gbo </p><p>6. Top Silk Screen: .gto </p><p>7. Drill: .drl </p><p>8.Outline: .outline</p><p>You can download the Gerber files from <a href="https://www.pcbway.com/project/shareproject/ARDUINO_PWM_SOLAR_CHARGE_CONTROLLER___V_2_02_.html" rel="nofollow">PCBWay</a></p><p><em>When you place an order from PCBWay, I will get a 10% donation from PCBWay for a contribution to my work. Your little help may encourage me to do more awesome work in the future. Thank you for your cooperation.</em></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step17" class="step" data-stepid="SQL1651K7VYKMBW"><h2 class="step-title">Step 17: PCB Manufacturing</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="PCB Manufacturing" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>Now it is time to find out a PCB manufacturer that can turn our Gerber files to a real PCB. I have sent my Gerber files to <a href="https://jlcpcb.com/" rel="nofollow">JLCPCB</a> for manufacturing my PCB. Their service is extremely good. I have received my PCB in India within 10 days.</p><p>The BOM for the project is attached below.</p></div><div class="downloads"><h3 class="sr-only">Attachments</h3><ul id="attachments" class="ible-files unstyled list-unstyled"><li class="file-info clearfix"><a class="thumb-wrapper" href="https://content.instructables.com/ORIG/F7D/9K64/K8CDJTXC/F7D9K64K8CDJTXC.pdf" download="BOM for Charge Controller V2.02.pdf"><span class="file-thumb"><img class="lazyload tiny-img" data-src="https://content.instructables.com/static/image/attachment-PDF.png" src="/assets/img/pixel.png" alt="download {{ file.name }}"><noscript><img class="tiny-img" src="https://content.instructables.com/static/image/attachment-PDF.png" alt="download {{ file.name }}"/></noscript></span><span class="title">BOM for Charge Controller V2.02.pdf</span></a><div class="file-actions"><a href="https://content.instructables.com/ORIG/F7D/9K64/K8CDJTXC/F7D9K64K8CDJTXC.pdf" download="BOM for Charge Controller V2.02.pdf" class="btn pull-right">Download</a></div></li></ul></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step18" class="step" data-stepid="SDKY015K7VYKN3O"><h2 class="step-title">Step 18: Soldering the Components</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Soldering the Components" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>After receiving the board from the PCB fab house, you have to solder the components.</p><p>For Soldering, you will need a decent Soldering Iron, Solder, Nipper, Desoldering Wicks or Pump and a multimeter. </p><p><em><strong>It is good practice to solder the components according to their height. Solder the lesser height components first. </strong></em></p><p>You can follow the following steps to solder the components : </p><p>1. Push the component legs through their holes, and turn the PCB on its back.</p><p> 2. Hold the tip of the soldering iron to the junction of the pad and the leg of the component. </p><p>3. Feed solder into the joint so that it flows all around the lead and covers the pad. Once it has flowed all around, move the tip away.</p><p>4. Trim the extra legs by using a Nipper.</p><p>Follow the above rules for soldering all the components.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step19" class="step" data-stepid="STE4O80K7NSUYS5"><h2 class="step-title">Step 19: Mounting the ACS712 Current Sensor</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Mounting the ACS712 Current Sensor" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Mounting the ACS712 Current Sensor" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Mounting the ACS712 Current Sensor" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>The ACS712 current sensor I have received has a pre-soldered screw terminal for connection. To solder the module directly on the PCB board, you have to desolder the screw terminal first.</p><p>I desolder the screw terminal with the help of a desoldering pump as shown above.</p><p>Then I solder the ACS712 module upside down.</p><p>To connect the Ip+ and Ip- terminal to the PCB, I used the diode terminal legs.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step20" class="step" data-stepid="SBIGW1IK7RRAL2X"><h2 class="step-title">Step 20: Adding the Buck Converter</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Adding the Buck Converter" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>To solder the Buck Converter module, you have to prepare 4 straight header pins as shown above.</p><p>Solder the 4 header pins at the X1, 2 are for output and the remaining two are for inputs.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step21" class="step" data-stepid="SLD8ROVK7VYKZEP"><h2 class="step-title">Step 21: Adding the Arduino Nano</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Adding the Arduino Nano" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Adding the Arduino Nano" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Adding the Arduino Nano" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Adding the Arduino Nano" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>When you purchase the straight headers, they'll be too long for the Arduino Nano. You'll need to trim them down to an appropriate length. This means 15 pins each.</p><p>The best way to trim the female header pieces is to count out 15 pins, pull the 16th pin, then use a nipper to cut the gap between the 15th and 17th pin.</p><p>Now we need to install the female headers onto the PCB. Take your female headers and place them on the male headers on the Arduino Nano board. </p><p>Then solder the female header pins to the Charge Controller PCB.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step22" class="step" data-stepid="SMFXFZTK7RRAL4Y"><h2 class="step-title">Step 22: Preparing the MOSFETs</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Preparing the MOSFETs" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Preparing the MOSFETs" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>Before soldering the MOSFETs Q1 Q2 and diode D1 on to the PCB, it is better to attach the heatsinks to them first. Heat sinks are used to move heat away from the device in order to maintain a lower device temperature.</p><p>Apply a layer of heatsink compound over the MOSFET metal base plate. Then place the thermally conductive pad in between the MOSFET and heat sink and tighten the screw. You can read <a href="https://www.digikey.in/en/articles/techzone/2019/jan/heat-sinks-a-step-by-step-guide" rel="nofollow">this article</a> about why heat sink is essential.</p><p>Finally, solder them on to the charge controller PCB.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step23" class="step" data-stepid="SPH4D2SK7RRAKHX"><h2 class="step-title">Step 23: Mounting the Standoffs</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Mounting the Standoffs" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Mounting the Standoffs" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Mounting the Standoffs" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>After soldering all the parts, mount the standoffs at 4 corners. I used M3 Brass Hex Standoffs.</p><p>The use of standoffs will provide sufficient clearance to the soldering joints and wires from the ground.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step24" class="step" data-stepid="S95JRAVK84NHC3K"><h2 class="step-title">Step 24: Software &amp; Libraries</h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Software &amp; Libraries" src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>First, download the attached Arduino Code. Then download the following libraries and install them.</p><p>1. <a href="https://github.com/PaulStoffregen/OneWire" rel="nofollow">One Wire</a></p><p>2. <a href="https://github.com/milesburton/Arduino-Temperature-Control-Library" rel="nofollow">DallasTemperature</a></p><p>3. <a href="https://bitbucket.org/fmalpartida/new-liquidcrystal/downloads/" rel="nofollow">LiquidCrystal_I2C</a></p><p>4. <a href="https://github.com/br3ttb/Arduino-PID-Library/" rel="nofollow">PID Library</a></p><p>The entire code is broken into the small functional block for flexibility. Suppose the user is not interested to use an LCD display and happy with the led indication. Then just disable the lcd_display() from the void loop(). That's all. Similarly, according to the user requirement, he can enable and disable the various functionality.</p><p>After installing all the above libraries, upload the Arduino Code.</p><p><strong><em>Note:</em></strong><em> I am now working on the software for implementing a better charging algorithm. Please keep in touch to get the latest version.</em></p><p><em><strong><u>Update on 02.04.2020</u></strong></em></p><p>Uploaded a new software with an improved charging algorithm and implementation of the PID controller in it. </p></div><div class="downloads"><h3 class="sr-only">Attachments</h3><ul id="attachments" class="ible-files unstyled list-unstyled"><li class="file-info clearfix"><a class="thumb-wrapper" href="https://content.instructables.com/ORIG/F1G/DMOG/K891MRFN/F1GDMOGK891MRFN.ino" download="Solar_Charge_Controller_V2..02_final_27.03.2020.ino"><span class="file-thumb"><img class="lazyload tiny-img" data-src="https://content.instructables.com/static/image/file.default.gif" src="/assets/img/pixel.png" alt="download {{ file.name }}"><noscript><img class="tiny-img" src="https://content.instructables.com/static/image/file.default.gif" alt="download {{ file.name }}"/></noscript></span><span class="title">Solar_Charge_Controller_V2..02_final_27.03.2020.ino</span></a><div class="file-actions"><a href="https://content.instructables.com/ORIG/F1G/DMOG/K891MRFN/F1GDMOGK891MRFN.ino" download="Solar_Charge_Controller_V2..02_final_27.03.2020.ino" class="btn pull-right">Download</a></div></li><li class="file-info clearfix"><a class="thumb-wrapper" href="https://content.instructables.com/ORIG/F2E/W190/K8HKH1QL/F2EW190K8HKH1QL.rar" download="PWM-V2.02_PID_02.04.2020.rar"><span class="file-thumb"><img class="lazyload tiny-img" data-src="https://content.instructables.com/static/image/file.default.gif" src="/assets/img/pixel.png" alt="download {{ file.name }}"><noscript><img class="tiny-img" src="https://content.instructables.com/static/image/file.default.gif" alt="download {{ file.name }}"/></noscript></span><span class="title">PWM-V2.02_PID_02.04.2020.rar</span></a><div class="file-actions"><a href="https://content.instructables.com/ORIG/F2E/W190/K8HKH1QL/F2EW190K8HKH1QL.rar" download="PWM-V2.02_PID_02.04.2020.rar" class="btn pull-right">Download</a></div></li></ul></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><section id="step25" class="step" data-stepid="SBAPLGPK84NFVUW"><h2 class="step-title">Step 25: Final Testing </h2><div class="mediaset"></div><noscript><div class="no-js-photoset"><img alt="Final Testing " src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Final Testing " src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"><img alt="Final Testing " src="{{ file.large_url|add:'auto=webp&frame=1&height=300' %}"></div></noscript><div class="step-body"><p>Connect the Charge Controller battery terminals ( BAT ) to a 12V battery. Be sure the polarity is correct. After connection, the LED and LCD will start working immediately. You will also notice the battery voltage and temperature on the 2nd row of the LCD display.</p><p>Then connect a Solar Panel to the solar terminal ( SOL ), you can see the solar voltage, current, and power on the first row of the LCD display. I have used a Lab Power supply to simulate the Solar Panel. I used my Power Meters to compare the Voltage, Current and Power values with the LCD display.</p><p>The test procedure is shown in this <a href="https://youtu.be/D6oR4-BFgQU" rel="nofollow">demo video</a></p><p>In the future, I will design a 3D printed enclosure for this project. Keep in touch.</p><p>This project is an entry in the <a href="https://www.instructables.com/contest/PCBdesign/" rel="nofollow">PCB Contest</a>, please vote for me. Your votes are a real inspiration for me to do more hard work to write more useful projects like this.</p><p>Thanks for reading my Instructable.<br/>If you like my project, don't forget to share it. </p><p>Comments and feedback are always welcome.</p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf">Download</button></div></section><div class="contest-entries finalized-contests"><div class="contest-entry"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FR7/ZTWR/K76IV7VO/FR7ZTWRK76IV7VO.jpg?auto=webp&amp;frame=1&amp;width=320" src="/assets/img/pixel.png" alt="PCB Design Challenge"><noscript><img  src="https://content.instructables.com/ORIG/FR7/ZTWR/K76IV7VO/FR7ZTWRK76IV7VO.jpg?auto=webp&amp;frame=1&amp;width=320" alt="PCB Design Challenge"/></noscript><p>Runner Up in the <br><a href="/contest/PCBdesign/">PCB Design Challenge</a></p><button class="btn view-btn ">View Contest</button></div></div><section id="imadeits" class="imadeits"><h2>
        
            Be the First to Share
        
    </h2><ul class="list-unstyled unstyled imadeit-list js-comments"></ul><div class="share"><div class="share-inner"><p>Did you make this project? Share it with us!</p><button class="btn btn-yellow made-it-btn js-show-poster">I Made It!</button></div></div></section><section class="recommendations"><h2>Recommendations</h2><div class="recommendations-projects side-scrolling-container"><div class="recommendations-projects-ible"><a href="/LED-Matrix-With-Web-Server/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FU0/D07V/KTBIGV1V/FU0D07VKTBIGV1V.png?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" src="/assets/img/pixel.png" alt="LED-Matrix With Web Server"><noscript><img  src="https://content.instructables.com/ORIG/FU0/D07V/KTBIGV1V/FU0D07VKTBIGV1V.png?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" alt="LED-Matrix With Web Server"/></noscript></a><div class="recommendations-projects-ible-info"><strong><a class="ible-title" href="/LED-Matrix-With-Web-Server/">LED-Matrix With Web Server</a></strong><span class="ible-author">
            by <a href="/member/Brocki/">Brocki</a></span><span class="ible-channel">
                in <a href="/circuits/leds/projects/">LEDs</a></span></div><div class="ible-stats"><span class="ible-stats-left-col ible-featured"></span><span class="ible-stats-right-col"><span class="ible-favorites"><i title="Favorites Count" class="icon icon-favorite"></i>
                        113
                    </span><span class="ible-views"><i title="Views Count" class="icon icon-views1"></i>
                    4.0K
                </span></span></div></div><div class="recommendations-projects-ible"><a href="/DIY-1kW-MPPT-Solar-Charge-Controller/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FZI/VL94/KTCA11A3/FZIVL94KTCA11A3.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" src="/assets/img/pixel.png" alt="1kW Arduino MPPT Solar Charge Controller (ESP32 + WiFi)"><noscript><img  src="https://content.instructables.com/ORIG/FZI/VL94/KTCA11A3/FZIVL94KTCA11A3.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" alt="1kW Arduino MPPT Solar Charge Controller (ESP32 + WiFi)"/></noscript></a><div class="recommendations-projects-ible-info"><strong><a class="ible-title" href="/DIY-1kW-MPPT-Solar-Charge-Controller/">1kW Arduino MPPT Solar Charge Controller (ESP32 + WiFi)</a></strong><span class="ible-author">
            by <a href="/member/ASCAS/">ASCAS</a></span><span class="ible-channel">
                in <a href="/circuits/arduino/projects/">Arduino</a></span></div><div class="ible-stats"><span class="ible-stats-left-col ible-featured"></span><span class="ible-stats-right-col"><span class="ible-favorites"><i title="Favorites Count" class="icon icon-favorite"></i>
                        599
                    </span><span class="ible-views"><i title="Views Count" class="icon icon-views1"></i>
                    46K
                </span></span></div></div><div class="recommendations-projects-ible"><a href="/DIY-Fiber-Optic-Light-Sculpture/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FQT/RSZQ/KT8NKJ10/FQTRSZQKT8NKJ10.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" src="/assets/img/pixel.png" alt="DIY Fiber Optic Light Sculpture"><noscript><img  src="https://content.instructables.com/ORIG/FQT/RSZQ/KT8NKJ10/FQTRSZQKT8NKJ10.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" alt="DIY Fiber Optic Light Sculpture"/></noscript></a><div class="recommendations-projects-ible-info"><strong><a class="ible-title" href="/DIY-Fiber-Optic-Light-Sculpture/">DIY Fiber Optic Light Sculpture</a></strong><span class="ible-author">
            by <a href="/member/andrei.erdei/">andrei.erdei</a></span><span class="ible-channel">
                in <a href="/circuits/leds/projects/">LEDs</a></span></div><div class="ible-stats"><span class="ible-stats-left-col ible-featured"></span><span class="ible-stats-right-col"><span class="ible-imadeits"><i title="IMadeIts Count" class="icon icon-imadeit"></i>
                    1
                </span><span class="ible-favorites"><i title="Favorites Count" class="icon icon-favorite"></i>
                        103
                    </span><span class="ible-views"><i title="Views Count" class="icon icon-views1"></i>
                    8.2K
                </span></span></div></div><div class="recommendations-projects-ible"><a href="/Portable-LED-Lamp/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FNL/ALOM/KT37UYWX/FNLALOMKT37UYWX.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" src="/assets/img/pixel.png" alt="Portable LED Lamp"><noscript><img  src="https://content.instructables.com/ORIG/FNL/ALOM/KT37UYWX/FNLALOMKT37UYWX.jpg?auto=webp&amp;crop=1.2%3A1&amp;frame=1&amp;width=306" alt="Portable LED Lamp"/></noscript></a><div class="recommendations-projects-ible-info"><strong><a class="ible-title" href="/Portable-LED-Lamp/">Portable LED Lamp</a></strong><span class="ible-author">
            by <a href="/member/mattwach/">mattwach</a></span><span class="ible-channel">
                in <a href="/circuits/leds/projects/">LEDs</a></span></div><div class="ible-stats"><span class="ible-stats-left-col ible-featured"></span><span class="ible-stats-right-col"><span class="ible-favorites"><i title="Favorites Count" class="icon icon-favorite"></i>
                        20
                    </span><span class="ible-views"><i title="Views Count" class="icon icon-views1"></i>
                    2.8K
                </span></span></div></div></div><ul class="list-unstyled contests recommendations-contests"><li><h3 class="sr-only">Soup &amp; Stew Speed Challenge</h3><a href="/contest/soupstew/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FJQ/JXJ5/KT4D9TPU/FJQJXJ5KT4D9TPU.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" src="/assets/img/pixel.png" alt="Soup &amp; Stew Speed Challenge"><noscript><img  src="https://content.instructables.com/ORIG/FJQ/JXJ5/KT4D9TPU/FJQJXJ5KT4D9TPU.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" alt="Soup &amp; Stew Speed Challenge"/></noscript></a></li><li><h3 class="sr-only">Tinkercad Student Design Contest</h3><a href="/contest/TinkercadStudents21/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FRH/5WGL/KRQCUIYE/FRH5WGLKRQCUIYE.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" src="/assets/img/pixel.png" alt="Tinkercad Student Design Contest"><noscript><img  src="https://content.instructables.com/ORIG/FRH/5WGL/KRQCUIYE/FRH5WGLKRQCUIYE.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" alt="Tinkercad Student Design Contest"/></noscript></a></li><li><h3 class="sr-only">First Time Author Contest</h3><a href="/contest/first2021/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FIQ/UD0R/KRGCROXQ/FIQUD0RKRGCROXQ.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" src="/assets/img/pixel.png" alt="First Time Author Contest"><noscript><img  src="https://content.instructables.com/ORIG/FIQ/UD0R/KRGCROXQ/FIQUD0RKRGCROXQ.jpg?auto=webp&amp;crop=1240%2C600&amp;fit=bounds&amp;frame=1&amp;height=620&amp;width=620" alt="First Time Author Contest"/></noscript></a></li></ul></section><div id="discuss" class="comment-type-selector"></div><section id="comments" class="discussion "><h2>91 Comments</h2><div class="posts js-comments"><article class="post js-comment  " data-id="CP6W38EKSQEIV7A"  data-authorid="MUIU63LKSQEIV35" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/gauravg0205/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FJZ/1C6X/KSQEIV3U/FJZ1C6XKSQEIV3U.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="gauravg0205"><noscript><img  src="https://content.instructables.com/ORIG/FJZ/1C6X/KSQEIV3U/FJZ1C6XKSQEIV3U.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="gauravg0205"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/gauravg0205/">gauravg0205</a><p class="posted-date">
                    
                    
                    19 days ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I am using 40W solar panel and 12V/18Ah sealed lead acid battery. The voltage at the drain of MOSFET Q1 shows about 13V when pwm at T1 is zero. Why is that happening?<br/>I did continuity test on MOSFET and found that it was ok.<br/>The battery still continues to consume the full voltage available from solar panel around 14.7V even after lowering the pwm for absorption charge. What could be the reason?<br/><br/>Thanks</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CP9G4RMKFFECZ7O"  data-authorid="MG9288AH9X3IYCP" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/murfmv/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/F2X/XA5Y/I169OOEE/F2XXA5YI169OOEE.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="murfmv"><noscript><img  src="https://content.instructables.com/ORIG/F2X/XA5Y/I169OOEE/F2XXA5YI169OOEE.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="murfmv"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/murfmv/">murfmv</a><p class="posted-date"><span class="label tip-label">Tip</span>
                    
                    11 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>The error "POSITIVE" was not declared error while compiling has caused me hours of grief <br/>searching for and answer since the link was lost.   I found the answer at <a href="http://www.ardumotive.com/i2clcd.html" rel="nofollow noopener">www.ardumotive.com/i2clcd.html</a> . I went to the tutorial lcd_i2c_16x2_tutorial.zip and found the answer by using the library "hd44780" library and the script statements .</p></div><div class="js-edit-container"></div><div class="attachments"><a class="attachment" href="https://content.instructables.com/ORIG/F13/I9FD/KFFECZ7M/F13I9FDKFFECZ7M.ino" download="NewSolar_Charge_Controller_V2..02_final_27.03.2020.ino"><img class="lazyload" data-src="https://content.instructables.com/static/image/file.default.gif" src="/assets/img/pixel.png" alt="NewSolar_Charge_Controller_V2..02_final_27.03.2020.ino"><noscript><img  src="https://content.instructables.com/static/image/file.default.gif" alt="NewSolar_Charge_Controller_V2..02_final_27.03.2020.ino"/></noscript><span>NewSolar_Charge_Controller_V2..02_final_27.03.2020.ino</span></a></div><button class="hidden-replies-link js-show-replies" data-num-hidden="1">
            1
            
                reply
            
            <i class="icon-arrow-down"></i></button></article><article class="post js-comment reply hide" data-id="CYRADOWKOR6WA2Q"  data-authorid="MM17RKIKOBGZE7M" data-inreplyto="CP9G4RMKFFECZ7O"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/ilikefebris/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FGJ/BITV/KOCWF75E/FGJBITVKOCWF75E.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="ilikefebris"><noscript><img  src="https://content.instructables.com/ORIG/FGJ/BITV/KOCWF75E/FGJBITVKOCWF75E.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="ilikefebris"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/ilikefebris/">ilikefebris</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/murfmv/">murfmv</button><p class="posted-date">
                    
                        Reply
                    
                    3 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>thanks for your solution for this.. I saved lots of time..</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CD3EWF9K8CG1AXN"  data-authorid="M4ZLWMVIKBFP6XK" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/Bigggggggggy/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="Bigggggggggy"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="Bigggggggggy"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/Bigggggggggy/">Bigggggggggy</a><p class="posted-date">
                    
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Sir what a well thought out project and the presentation was excellent!! However, when I started pricing out the parts it exceeded $125 US dollar!!! A commercially made item with the same specifications and performance cost $16 US dollars. Im hoping the next version is much more cost effective as not all followers have the ability to pay such a large sum of money.</p></div><div class="js-edit-container"></div><button class="hidden-replies-link js-show-replies" data-num-hidden="6">
            6
            
                replies
            
            <i class="icon-arrow-down"></i></button></article><article class="post js-comment reply hide" data-id="CDL8RPVKMULQ300"  data-authorid="MU6VBONFOD7Y61E" data-inreplyto="CD3EWF9K8CG1AXN"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/bassbindevil/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="bassbindevil"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="bassbindevil"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/bassbindevil/">bassbindevil</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/Bigggggggggy/">Bigggggggggy</button><p class="posted-date">
                    
                        Reply
                    
                    5 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>The cheap charge controllers with an LCD voltage display are excellent value for money, but they don't measure how much energy is being produced or consumed, and the firmware can't be modified to support different battery voltages or chemistries.<br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="C2EHJ7KKL1CQM1S"  data-authorid="MAKMA17GNFSIMP5" data-inreplyto="CD3EWF9K8CG1AXN"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/tgray1/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="tgray1"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="tgray1"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/tgray1/">tgray1</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/Bigggggggggy/">Bigggggggggy</button><p class="posted-date">
                    
                        Reply
                    
                    7 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>LOL.  Biggggggy, some of us do this for fun and learning, not necessarily to get a cheap product.   <br/><br/>I started working on this twelve years ago, developing a solar charger/tracker with overcharge protection, dark turn on for load, etc. using discrete components (transistors, op amps, relays and so on).  It was a great accomplishment when I got the circuit designed and built, but it was so complex I never took it off the breadboard. My son looked at it and said, "I could do that with one microprocessor and a few resistors!"   Hmm.<br/><br/>Three iterations and a dozen years later, the tracker is running on an Arduino Nano and an L298N motor driver running linear actuators made with 3d printed parts.  It uses 1.5W solar panels with built in blocking diodes and overcharge protection.  It works, and it charges my battery.  Total cost over the years, maybe $100.  Total enjoyment, priceless.   Along the way I learned about microprocessors and coding.<br/><br/>But now it's time to add a better PV panel to the tracker, and build Debasish's charge controller, with lots of modifications (adding a PIR sensor to the load, for example).  Total cost so far, maybe $100 in parts (but I'll have lots of extras for future fun).  And I'll learn about PIR, buck converters, battery charging, and coding.<br/><br/>I wish you joy and satisfaction when building your version!<br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CVT1CRDKL2BAD2L"  data-authorid="MBB7Z6GIV0BO7TF" data-inreplyto="C2EHJ7KKL1CQM1S"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/JerryA38/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FP9/B3N2/IV0BO7TH/FP9B3N2IV0BO7TH.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="JerryA38"><noscript><img  src="https://content.instructables.com/ORIG/FP9/B3N2/IV0BO7TH/FP9B3N2IV0BO7TH.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="JerryA38"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/JerryA38/">JerryA38</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/tgray1/">tgray1</button><p class="posted-date">
                    
                        Reply
                    
                    7 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Sir you point is well taken, but I'm saying that my 50K Chevrolet Truck would cost over 150K if I decided to build it from the parts bin..I love working on cars and trucks, but I look towards value so I have MORE MONEY to spend on other projects!!!!</p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CAKQRC1K8CDCTZN"  data-authorid="MQK5AGDHABDGQ3X" data-inreplyto="CD3EWF9K8CG1AXN"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/opengreenenergy/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="opengreenenergy"><noscript><img  src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="opengreenenergy"/></noscript></a></div><div class="posted-by"><a class="author owner" href="/member/opengreenenergy/">opengreenenergy</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/Bigggggggggy/">Bigggggggggy</button><p class="posted-date">
                    
                        Reply
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Dear Sir,<br/>The amazon links are for reference, I prepared a BOM with prices of each component in Aliexpress. The project cost is below $15. I am attaching the BOM with links in step-17: PCB manufacturing.<br/>Hope it will be helpful for you now.<br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CS61KIDK8CG5G7R"  data-authorid="M4ZLWMVIKBFP6XK" data-inreplyto="CAKQRC1K8CDCTZN"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/Bigggggggggy/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="Bigggggggggy"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="Bigggggggggy"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/Bigggggggggy/">Bigggggggggy</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/opengreenenergy/">opengreenenergy</button><p class="posted-date">
                    
                        Reply
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Thank you sir for the quick response!! I expect that projects with this much detail are going to cost above most commercial products, but not 4 to 5 times as much...Super project and super response...and thank you for the BOM...</p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="C21QW44K8CG3FOH"  data-authorid="MWUJ0G3IXGFZN5S" data-inreplyto="CD3EWF9K8CG1AXN"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/BarryD43/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="BarryD43"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="BarryD43"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/BarryD43/">BarryD43</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/Bigggggggggy/">Bigggggggggy</button><p class="posted-date">
                    
                        Reply
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>thank you for that, I immediately went to the pcbway site and there is no listed price, so that automatically raised the hairs on the back of my neck as I am on a disability pension and therefore always on the lookout for diy stuff that is cheaper than the commercial one. Not the other way around</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CEFM2Y4KMHQPVS0"  data-authorid="MEQDYCGKM6B7AWZ" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/amelchahmi/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FKI/7KJR/KM6B7AX1/FKI7KJRKM6B7AX1.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="amelchahmi"><noscript><img  src="https://content.instructables.com/ORIG/FKI/7KJR/KM6B7AX1/FKI7KJRKM6B7AX1.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="amelchahmi"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/amelchahmi/">amelchahmi</a><p class="posted-date">
                    
                    
                    5 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Great work, can i use this for a 9v battery ? Should i just change the voltage divider or there's more changes ? </p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CU0HYJCKLI0R5XU"  data-authorid="M5YTSG0I916JK6J" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/ApieGoku/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FU1/MZ9C/IZT6F5M5/FU1MZ9CIZT6F5M5.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="ApieGoku"><noscript><img  src="https://content.instructables.com/ORIG/FU1/MZ9C/IZT6F5M5/FU1MZ9CIZT6F5M5.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="ApieGoku"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/ApieGoku/">ApieGoku</a><p class="posted-date">
                    
                    
                    6 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text">
        Hi, I want to add WiFi to this control. I already bought 5 board from PCBWay. And does <div><a href="https://arduino.stackexchange.com/questions/17590/arduino-nano-v3-0-with-esp8266" rel="nofollow"></a><div><div><a href="https://arduino.stackexchange.com/questions/17590/arduino-nano-v3-0-with-esp8266" rel="nofollow"></a><a href="https://arduino.stackexchange.com/questions/17590/arduino-nano-v3-0-with-esp8266" rel="nofollow">Arduino Nano v3.0 with ESP8266</a> also work? <br/><br/>Please, help needed. Kind regards<br/></div></div></div></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CQMEY3XKFXZ3FOO"  data-authorid="MAKMA17GNFSIMP5" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/tgray1/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="tgray1"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="tgray1"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/tgray1/">tgray1</a><p class="posted-date">
                    
                    
                    11 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Looking at the code, I note that the average room temperature is taken as 25C.  I need this project to work outside; where I live (Alberta, Canada) temperatures can range from a very rare 30C  to an all too common -35C, with the average annual temperature being 8.5C.  What a difference between here and India!   <br/>Generally, a trickle charge will keep a battery from freezing up, so I expect this will work here in the winter.<br/></p></div><div class="js-edit-container"></div><button class="hidden-replies-link js-show-replies" data-num-hidden="2">
            2
            
                replies
            
            <i class="icon-arrow-down"></i></button></article><article class="post js-comment reply hide" data-id="CM5AHK2KL2AVSF6"  data-authorid="MAKMA17GNFSIMP5" data-inreplyto="CQMEY3XKFXZ3FOO"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/tgray1/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="tgray1"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="tgray1"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/tgray1/">tgray1</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/tgray1/">tgray1</button><p class="posted-date">
                    
                        Reply
                    
                    7 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I have since learned that the 25C figure is not exactly "standard room temperature" as given in the code, but is considered the "standard charging temperature" for lead-acid batteries.  <br/><a href="https://batteryuniversity.com/learn/article/charging_at_high_and_low_temperatures" rel="nofollow">https://batteryuniversity.com/learn/article/charging_at_high_and_low_temperatures<br/><br/><a href="https://batteryuniversity.com/index.php/learn/article/charging_the_lead_acid_battery" rel="nofollow">https://batteryuniversity.com/index.php/learn/article/charging_the_lead_acid_battery</a></a><br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CMOQM1HKGC9HQD3"  data-authorid="MG9288AH9X3IYCP" data-inreplyto="CQMEY3XKFXZ3FOO"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/murfmv/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/F2X/XA5Y/I169OOEE/F2XXA5YI169OOEE.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="murfmv"><noscript><img  src="https://content.instructables.com/ORIG/F2X/XA5Y/I169OOEE/F2XXA5YI169OOEE.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="murfmv"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/murfmv/">murfmv</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/tgray1/">tgray1</button><p class="posted-date">
                    
                        Reply
                    
                    11 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>This temperature protection, I believe, is protecting the battery from overcharging and heating up. That isn’t a concern in your area.</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C27DNPRK9G9GGG8"  data-authorid="MQVDLH6I8CVZ9IW" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/mzelectronic/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="mzelectronic"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="mzelectronic"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/mzelectronic/">mzelectronic</a><p class="posted-date">
                    
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hello.<br/>I created a V2.0 PWM Charge Controller. Now you have modified that and made a new V2.02. The difference is in MOSFET. Can I use an existing IRF9540 or do I need to put an IRF4905? What's the difference?<br/>Also, I changed the resistors on the voltage divider and some values in the program itself, since I use a 24v system.<br/>As for the program, I have two questions:<br/><a href="http://1.In" rel="nofollow">1.In</a> the setup section:<br/><strong>sensors.begin ();</strong><br/>I'm getting an error. If I remove that line, everything is fine. I do not understand this function.<br/>2. Why is this marked as a comment in STAGE-2 (ABSORPTION CHARGING) ?:<br/><strong>/ * error = (bat_volt - bulk_charge_sp); // duty cycle reduced when the battery voltage approaches the charge set point and vice versa<br/>  if (abs (error) &lt;0.3) {<br/>  pwm_duty = pwm_duty - error * 25.5;<br/>  }<br/>  else {<br/>  pwm_duty = pwm_duty - error * 255;<br/>  }<br/>  * /</strong><br/><br/>Thanks in advance.<br/>Marko, Varazdin, Croatia.</p></div><div class="js-edit-container"></div><button class="hidden-replies-link js-show-replies" data-num-hidden="3">
            3
            
                replies
            
            <i class="icon-arrow-down"></i></button></article><article class="post js-comment reply hide" data-id="CHWOYIHKBFVCEMO"  data-authorid="MQK5AGDHABDGQ3X" data-inreplyto="C27DNPRK9G9GGG8"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/opengreenenergy/"><img class="lazyload" data-src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="opengreenenergy"><noscript><img  src="https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="opengreenenergy"/></noscript></a></div><div class="posted-by"><a class="author owner" href="/member/opengreenenergy/">opengreenenergy</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/mzelectronic/">mzelectronic</button><p class="posted-date">
                    
                        Reply
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hi Sorry for the late reply.<br/>sensors.begin (); is used for temperature sensor DS18B20.<br/>The section is commented because I have used PID controller algorithm instead of my earlier code.</p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="C5RK2K9KL1CQKGC"  data-authorid="MAKMA17GNFSIMP5" data-inreplyto="CHWOYIHKBFVCEMO"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/tgray1/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="tgray1"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="tgray1"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/tgray1/">tgray1</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/opengreenenergy/">opengreenenergy</button><p class="posted-date">
                    
                        Reply
                    
                    7 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Love this project and in the process of building V2.0.2  The code I am using is dated 24/03/2020.<br/><br/>Where is the PID algorithm?  I've checked the PID library and I don't see any of it in your code.    I've done PID tuning on my 3d printers and I was looking for Ki, Kp, and Kd in the code, kind of like at <a href="https://www.teachmemicro.com/arduino-pid-control-tutorial/" rel="nofollow">https://www.teachmemicro.com/arduino-pid-control-tutorial/</a>.  Perhaps I do not have the latest version? <br/><br/>Temperature is handled in these four lines:<br/>OneWire oneWire(ONE_WIRE_BUS); // set up a OneWire to communicate with OneWire devices <br/>DallasTemperature sensors(&amp;oneWire); // pass the above to the Dallas Temp sensor<br/>sensors.requestTemperatures(); // get temperature reading <br/>temperature=sensors.getTempCByIndex(0); // poll the first IC on the wire and store in the variable "temperature"<br/><br/>Thanks in advance for addressing this.<br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CAH8FBKKCRO0D7L"  data-authorid="MQVDLH6I8CVZ9IW" data-inreplyto="CHWOYIHKBFVCEMO"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/mzelectronic/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="mzelectronic"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="mzelectronic"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/mzelectronic/">mzelectronic</a><i class="icon-arrow-right"></i><button class="replied-to js-reply-parent" href="/member/opengreenenergy/">opengreenenergy</button><p class="posted-date">
                    
                        Reply
                    
                    1 year ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Can I use an existing IRF9540 or do I need to put an IRF4905? What's the difference?<br/><br/>Thank You!<br/></p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CDB5CQTKIS7V9F6"  data-authorid="MERIPIYK1ORLSUA" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/NoOne38/"><img class="lazyload" data-src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" src="/assets/img/pixel.png" alt="NoOne38"><noscript><img  src="https://content.instructables.com/static/image/user.default.png?auto=webp&amp;crop=1%3A1&amp;frame=1&amp;width=48" alt="NoOne38"/></noscript></a></div><div class="posted-by"><a class="author " href="/member/NoOne38/">NoOne38</a><p class="posted-date"><span class="label question-label">Question</span>
                    
                    9 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Answer</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hello ,<br/>very nice project that I am trying to achieve but I am <br/>penalized by the instability at low load of the ACS712. Would you have a<br/> solution please? (pardon my English)<br/></p></div><div class="js-edit-container"></div></article></div><button class="btn js-more-comments">More Comments</button><button class="btn btn-yellow comment-btn js-show-poster">Post Comment</button></section></div></div></article><div id="admin-container"></div></main><footer id="footer" class="footer footer-desktop footer-circuits"><div class="footer-row footer-row-top"><div class="footer-robot robot-icon robot-icon-circuits"></div><div class="footer-categories"><span class="title">Categories</span><ul class="footer-categories-links"><li class="circuits active"><a href="/circuits/"><div class="category-icon icon-category-circuits"></div>Circuits
                            </a></li><li class="workshop "><a href="/workshop/"><div class="category-icon icon-category-workshop"></div>Workshop
                            </a></li><li class="craft "><a href="/craft/"><div class="category-icon icon-category-craft"></div>Craft
                            </a></li><li class="cooking "><a href="/cooking/"><div class="category-icon icon-category-cooking"></div>Cooking
                            </a></li><li class="living "><a href="/living/"><div class="category-icon icon-category-living"></div>Living
                            </a></li><li class="outside "><a href="/outside/"><div class="category-icon icon-category-outside"></div>Outside
                            </a></li><li class="teachers "><a href="/teachers/"><div class="category-icon icon-category-teachers"></div>Teachers
                            </a></li></ul></div><div class="footer-about-us"><span class="title">About Us</span><ul><li><a href="/about/">Who We Are</a></li><li><a href="/create/">Why Publish?</a></li></ul></div><div class="footer-resources"><span class="title">Resources</span><ul><li><a href="/sitemap/">Sitemap</a></li><li><a href="/how-to-write-a-great-instructable/">Help</a></li><li><a href="/contact/">Contact</a></li></ul></div><div class="footer-find-us"><span class="title">Find Us</span><ul><li><a class="instagram" href="https://www.instagram.com/instructables/" title="Instagram"><i class="svg-icon svg-share-instagram"></i></a></li><li><a class="pinterest" href="https://www.pinterest.com/instructables" title="Pinterest"><i class="svg-icon svg-share-pinterest"></i></a></li><li><a class="facebook" href="https://www.facebook.com/instructables" title="Facebook"><i class="svg-icon svg-share-facebook"></i></a></li><li><a class="twitter" href="https://www.twitter.com/instructables" title="Twitter"><i class="svg-icon svg-share-twitter"></i></a></li></ul></div></div><div class="footer-rule"><hr/></div><div class="footer-row footer-row-bottom"><div class="footer-links"><p>© 2021 Autodesk, Inc.</p><ul class="footer-links-list"><li><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=21959721" target="_blank">Terms of Service</a><span class="divider">|</span></li><li><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=21292079" target="_blank">Privacy Statement</a><span class="divider">|</span></li><li><a data-opt-in-preferences="">Privacy settings</a><span class="divider">|</span></li><li><a href="http://usa.autodesk.com/legal-notices-trademarks/" target="_blank">Legal Notices &amp; Trademarks</a></li></ul><a href="http://www.autodesk.com" class="adsk-logo" target="blank"><img alt="Autodesk" src="/assets/img/footer/autodesk-logo-make-anything.png"/></a></div></div></footer><script id="js-page-context" type="application/json">{"mobile":false,"accessCookie":"ibleAccess","sessionCookie":"JSESSIONID","loggedInCookie":"loggedIn","awsAlbCookie":"AWSALB","sourceCookie":"iblesource","userStorageKey":"ibleuser","currentLocale":"en_US","remoteHost":"https://www.instructables.com","remoteRoot":"https://www.instructables.com/","staticRoot":"/assets/","facebookAppId":"140028286058792","recaptchaSiteKey":"6Le9TAwTAAAAADEB44pkYQS2fm7hroFthrNqnoAb","oauthCallbackUrl":"https://www.instructables.com/oauth/callback/","oauthGetAuthUrl":"https://www.instructables.com/oauth/getAuthUrl/","nativeApp":false,"disableEmailVerifyWidget":false,"gtmContainerID":"GTM-PLDK3K","cacheUrls":["https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/","https://fastly-backend.prod.instructables.tech/json-api/showInstructableModel?anyStatus=false&urlString=ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202&versionId=","https://fastly-backend.prod.instructables.tech/json-api/searchComments?IMadeIt=true&instructableId=EYSGNVCK7NSUYRZ","https://fastly-backend.prod.instructables.tech/json-api/getComments?IMadeIt=false&commentId=&instructableId=EYSGNVCK7NSUYRZ&limit=20","https://fastly-backend.prod.instructables.tech/json-api/searchInstructables?type=id&featuredHomePage=true&categories=circuits&excludeIds=EYSGNVCK7NSUYRZ&additionalParams=-indexTags%3AdesignOnly%2C+&offset=0&limit=20&sort=","https://fastly-backend.prod.instructables.tech/json-api/getContests?status=published&offset=0&limit=50&sort=added"],"commitInfo":{"git_hash":"1a61c9e419","commit_message":"Merge pull request #356 from instructables/IN-4949_redirect_innovator_kit"},"cdnUrlUserContent":"https://content.instructables.com","cdnUrlInternal":"https://content.instructables.com","cdnUrls":["https://content.instructables.com","https://content.instructables.com","https://content.instructables.com"],"xhrTimeoutMilliseconds":15000.0,"imageFileExtensions":["jpg","jpeg","gif","png","bmp"],"uploadableFileTypes":["bmp","gif","img","jpg","jpeg","pct","pict","png","raw","tif","tiff","avi","mov","mpg","mpeg","mp4","ogg","ram","webm","wmv","3gp","aaf","aif","aiff","mp3","wav","ai","apk","asc","asy","bat","brd","c","cdr","cpp","crw","csv","dru","dwg","dxf","eps","fzz","f3d","g","gco","gcode","gz","h","hex","iam","indd","ino","ipt","key","lbr","m3u","pde","pdf","psd","py","rtfsch","skp","sldprt","step","stl","studio2","studio3","sub","svg","swf","txt","visuino","vsd","wpr","xml","3mf"],"featureFlags":{"request_timeout":true,"editor_alpha":true},"category":"circuits","channel":"arduino","ibleData":{"id":"EYSGNVCK7NSUYRZ","urlString":"ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202","fullUrl":"https://www.instructables.com/ARDUINO-PWM-SOLAR-CHARGE-CONTROLLER-V-202/","shareImageUrl":"https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp&frame=1","title":"ARDUINO PWM SOLAR CHARGE CONTROLLER ( V 2.02)","type":"Step by Step","featureFlag":true,"classifications":[{"name":"circuits","title":"Circuits","type":"category","channels":[{"name":"arduino","title":"Arduino","type":"channel","category":"circuits"}]}],"category":"circuits","channel":"arduino","grade":"","subject":"","author":{"id":"MQK5AGDHABDGQ3X","screenName":"opengreenenergy","originalUrl":"https://content.instructables.com/ORIG/FB3/IIWS/KAPPHGGA/FB3IIWSKAPPHGGA.jpg?auto=webp"},"coverImage":{"originalUrl":"https://content.instructables.com/ORIG/FTK/BVPP/K84NI158/FTKBVPPK84NI158.jpg?auto=webp"},"commentingEnabled":true,"indexTags":["internal"],"publishDate":"2020-03-24 09:29:39.0","finalistContestEntries":[{"id":"VONFP1OK73ZKCBA","urlString":"PCBdesign","title":"PCB Design Challenge"}]}}</script><script>/*! head.load - v2.0.0 */
!function(e,t){"use strict";var n,a,r=e.document,o=[],u=[],c={},l={},i="async"in r.createElement("script")||"MozAppearance"in r.documentElement.style||e.opera,s=e.head_conf&&e.head_conf.head||"head",d=e[s]=e[s]||function(){d.ready.apply(null,arguments)};function f(){}function p(e,t){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var n=0,a=e.length;n<a;n++)t.call(e,e[n],n)}}function y(e,n){var a=Object.prototype.toString.call(n).slice(8,-1);return n!==t&&null!==n&&a===e}function m(e){return y("Function",e)}function h(e){return y("Array",e)}function v(e){(e=e||f)._done||(e(),e._done=1)}function g(e){var t,n,a,r,o={};if("object"==typeof e)for(var u in e)e[u]&&(o={name:u,url:e[u]});else o={name:(t=e,n=t.split("/"),a=n[n.length-1],r=a.indexOf("?"),-1!==r?a.substring(0,r):a),url:e};var c=l[o.name];return c&&c.url===o.url?c:(l[o.name]=o,o)}function E(e){for(var t in e=e||l)if(e.hasOwnProperty(t)&&4!==e[t].state)return!1;return!0}function L(e,n){e.state===t&&(e.state=1,e.onpreload=[],b({url:e.url,type:"cache"},(function(){!function(e){e.state=2,p(e.onpreload,(function(e){e.call()}))}(e)})))}function T(e,t){t=t||f,4!==e.state?3!==e.state?1!==e.state?(e.state=3,b(e,(function(){e.state=4,t(),p(c[e.name],(function(e){v(e)})),a&&E()&&p(c.ALL,(function(e){v(e)}))}))):e.onpreload.push((function(){T(e,t)})):d.ready(e.name,t):t()}function b(t,n){var a;n=n||f,/\.css[^\.]*$/.test(t.url)?((a=r.createElement("link")).type="text/"+(t.type||"css"),a.rel="stylesheet",a.href=t.url):((a=r.createElement("script")).type="text/"+(t.type||"javascript"),a.src=t.url),a.onload=a.onreadystatechange=function(t){("load"===(t=t||e.event).type||/loaded|complete/.test(a.readyState)&&(!r.documentMode||r.documentMode<9))&&(a.onload=a.onreadystatechange=a.onerror=null,n())},a.onerror=function(t){t=t||e.event,a.onload=a.onreadystatechange=a.onerror=null,n()},a.async=!1,a.defer=!1;var o=r.head||r.getElementsByTagName("head")[0];o.insertBefore(a,o.lastChild)}function j(){if(!r.body)return e.clearTimeout(d.readyTimeout),void(d.readyTimeout=e.setTimeout(j,50));a||(a=!0,function(){for(var e=r.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var a=e[t].getAttribute("data-headjs-load");if(a)return void d.load(a)}}(),p(o,(function(e){v(e)})))}function A(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",A,!1),j()):"complete"===r.readyState&&(r.detachEvent("onreadystatechange",A),j())}if("complete"===r.readyState)j();else if(r.addEventListener)r.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",j,!1);else{r.attachEvent("onreadystatechange",A),e.attachEvent("onload",j);var S=!1;try{S=!e.frameElement&&r.documentElement}catch(e){}S&&S.doScroll&&function t(){if(!a){try{S.doScroll("left")}catch(n){return e.clearTimeout(d.readyTimeout),void(d.readyTimeout=e.setTimeout(t,50))}j()}}()}d.load=d.js=i?function(){var e=arguments,t=e[e.length-1],n={};return m(t)||(t=null),h(e[0])?(e[0].push(t),d.load.apply(null,e[0]),d):(p(e,(function(e,a){e!==t&&(e=g(e),n[e.name]=e)})),p(e,(function(e,a){e!==t&&T(e=g(e),(function(){E(n)&&v(t)}))})),d)}:function(){var e=arguments,t=[].slice.call(e,1),a=t[0];return n?(a?(p(t,(function(e){!m(e)&&e&&L(g(e))})),T(g(e[0]),m(a)?a:function(){d.load.apply(null,t)})):T(g(e[0])),d):(u.push((function(){d.load.apply(null,e)})),d)},d.test=function(e,t,n,a){var r="object"==typeof e?e:{test:e,success:!!t&&(h(t)?t:[t]),failure:!!n&&(h(n)?n:[n]),callback:a||f},o=!!r.test;return o&&r.success?(r.success.push(r.callback),d.load.apply(null,r.success)):!o&&r.failure?(r.failure.push(r.callback),d.load.apply(null,r.failure)):a(),d},d.ready=function(e,t){if(e===r)return a?v(t):o.push(t),d;if(m(e)&&(t=e,e="ALL"),h(e)){var n={};return p(e,(function(e){n[e]=l[e],d.ready(e,(function(){E(n)&&v(t)}))})),d}if("string"!=typeof e||!m(t))return d;var u=l[e];if(u&&4===u.state||"ALL"===e&&E()&&a)return v(t),d;var i=c[e];return i?i.push(t):i=c[e]=[t],d},d.ready(r,(function(){n&&E()&&p(c.ALL,(function(e){v(e)})),d.feature&&d.feature("domloaded",!0)})),setTimeout((function(){n=!0,p(u,(function(e){e()}))}),300)}(window);</script><script>
        loadJS({
            test: Ibles.isLoggedIn,
            success: ["/assets/BUNDLES/ible_desktop_logged_in_js.min.js?c=1a61c9e419"],
            failure: ["/assets/BUNDLES/ible_desktop_logged_out_js.min.js?c=1a61c9e419"],
            callback: function() {
                
                var model = new Ibles.models.InstructableModel(_.extend({
                    disableComments: false,
                    allSteps: true,
                    fetchUserData: true,
                    fetchStats: true
                }, Ibles.pageContext.ibleData));

                var view = new Ibles.views.DesktopInstructableView({
                    el: "#article",
                    model: model
                });
                
            }
        });
    </script><script>
    // redirect if framed and browser does not respect CSP
    if (window.self !== window.top) window.top.location = window.self.location

    

    deferJS(function() {
        
        window.globalScripts = !Ibles.isLoggedIn ?
            ["/assets/BUNDLES/global_desktop_logged_out_bs2_js.min.js?c=1a61c9e419"]:
            ["/assets/BUNDLES/global_desktop_logged_in_bs2_js.min.js?c=1a61c9e419"];
        

        head.load(globalScripts.concat(pageScripts), function(){
            execCallbackQueue(loadJsQueue, loadJS);
        });
    });
</script></body></html>